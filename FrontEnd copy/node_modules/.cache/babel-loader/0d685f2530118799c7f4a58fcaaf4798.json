{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Documents\\\\Node-js\\\\projects\\\\videostreamer\\\\FrontEnd\\\\src\\\\Context\\\\StateContext.jsx\";\nimport React, { createContext, Component } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport { v4 as uuidv4 } from \"uuid\"; // import dogImages from '../dogImages.json';\n// import catImages from '../catImages.json';\n// import birdImages from '../birdImages.json';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const StateContext = /*#__PURE__*/createContext();\n\nclass StateContextProvider extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      userName: \"\",\n      password: \"\",\n      loginUser: \"\",\n      data: \"\",\n      routeTo: \"\",\n      user: [],\n      response: \"\",\n      userConfirmed: false,\n      allVideos: [],\n      viewedVideo: {\n        videoTitle: \"\",\n        videoSource: \"\",\n        _id: \"22233\",\n        userData: {\n          userName: \"Guest\",\n          Videos: {}\n        }\n      }\n    };\n\n    this.handleSetUserData = userId => {\n      this.setState({\n        userData: this.state.user\n      });\n    };\n\n    this.handleGetVideos = async () => {\n      try {\n        const response = await axios.post(`/download_videos/`);\n        this.setState({\n          allVideos: response.data\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    this.handleUserAuthentication = async (userName, password) => {\n      axios.get(`/login/${userName}/`, {\n        password\n      }).then(response => {\n        this.setState({\n          userConfirmed: response.data.status\n        });\n      }).then(() => {\n        this.handleGetUserData(userName);\n      }).catch(err => console.log(err));\n    };\n\n    this.handleCreateUserAccount = (userName, password) => {\n      axios.post(`/create_account/${userName}`, {\n        password\n      }).then(response => {\n        this.setState({\n          userConfirmed: response.data.status\n        });\n      }).then(() => {\n        this.handleGetUserData(userName);\n      }).catch(err => console.log(err));\n    };\n\n    this.handleGetUserData = async userName => {\n      if (this.state.userConfirmed) {\n        axios.get(`/login/${userName}/user_data`).then(response => {\n          this.setState({\n            user: response.data.userData\n          });\n          this.setState({\n            loginUser: true\n          });\n        }).catch(err => console.log(err));\n      } else {\n        this.setState({\n          loginUser: false\n        });\n      }\n    };\n\n    this.handleGetUserDataNew = async (userId, user) => {\n      if (this.state.userConfirmed) {\n        axios.get(`/login/${userName}/user_data`).then(response => {\n          this.setState({\n            user: response.data.userData\n          });\n          this.setState({\n            loginUser: true\n          });\n        }).catch(err => console.log(err));\n      } else {\n        this.setState({\n          loginUser: false\n        });\n      }\n    };\n\n    this.handleViewedVideo = videoId => {\n      const viewedVideo = this.state.allVideos.filter(video => video._id === videoId);\n      this.setState({\n        viewedVideo: viewedVideo[0]\n      });\n      console.log(viewedVideo);\n    };\n\n    this.uploadVideo = async (videoTitle, videoSource) => {\n      const videoId = uuidv4();\n      const userVideo = {\n        videoTitle,\n        videoSource,\n        videoId\n      };\n      axios.post(`/upload_video/${this.state.user.userName}/${this.state.user._id}`, userVideo).then(response => {\n        console.log(response.data, \"videos\");\n      }).catch(err => console.log(err));\n    };\n\n    this.resetLoginUser = () => {\n      this.setState({\n        loginUser: \"\"\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.handleGetVideos();\n  } // shuffleCards = () => {\n  // \tlet images = this.state.displayedImages;\n  // \tfor (let i = images.length - 1; i > 0; i--) {\n  // \t\tconst j = Math.floor(Math.random() * (i + 1));\n  // \t\t[ images[i], images[j] ] = [ images[j], images[i] ];\n  // \t}\n  // \tthis.setState({\n  // \t\tdogImages: images\n  // \t});\n  // };\n  // shuffleImages = () => {\n  // \tlet num = Math.floor(Math.random() * this.state.images.length);\n  // \tthis.setState({\n  // \t\tdisplayedImages: this.state.images[num]\n  // \t});\n  // };\n\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(StateContext.Provider, {\n      value: { ...this.state,\n        uploadVideo: this.uploadVideo,\n        handleUserAuthentication: this.handleUserAuthentication,\n        handleCreateUserAccount: this.handleCreateUserAccount,\n        resetLoginUser: this.resetLoginUser,\n        handleViewedVideo: this.handleViewedVideo\n      },\n      children: this.props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default StateContextProvider;","map":{"version":3,"sources":["C:/Users/LENOVO/Documents/Node-js/projects/videostreamer/FrontEnd/src/Context/StateContext.jsx"],"names":["React","createContext","Component","axios","useHistory","v4","uuidv4","StateContext","StateContextProvider","state","userName","password","loginUser","data","routeTo","user","response","userConfirmed","allVideos","viewedVideo","videoTitle","videoSource","_id","userData","Videos","handleSetUserData","userId","setState","handleGetVideos","post","err","console","log","handleUserAuthentication","get","then","status","handleGetUserData","catch","handleCreateUserAccount","handleGetUserDataNew","handleViewedVideo","videoId","filter","video","uploadVideo","userVideo","resetLoginUser","componentDidMount","render","props","children"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,SAA/B,QAAgD,OAAhD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,EAAE,IAAIC,MAAf,QAA6B,MAA7B,C,CAEA;AACA;AACA;;;AAEA,OAAO,MAAMC,YAAY,gBAAGN,aAAa,EAAlC;;AAEP,MAAMO,oBAAN,SAAmCN,SAAnC,CAA6C;AAAA;AAAA;AAAA,SAC3CO,KAD2C,GACnC;AACNC,MAAAA,QAAQ,EAAE,EADJ;AAENC,MAAAA,QAAQ,EAAE,EAFJ;AAGNC,MAAAA,SAAS,EAAE,EAHL;AAINC,MAAAA,IAAI,EAAE,EAJA;AAKNC,MAAAA,OAAO,EAAE,EALH;AAMNC,MAAAA,IAAI,EAAE,EANA;AAONC,MAAAA,QAAQ,EAAE,EAPJ;AAQNC,MAAAA,aAAa,EAAE,KART;AASVC,MAAAA,SAAS,EAAC,EATA;AAUVC,MAAAA,WAAW,EAAC;AACZC,QAAAA,UAAU,EAAC,EADC;AAEZC,QAAAA,WAAW,EAAC,EAFA;AAGZC,QAAAA,GAAG,EAAC,OAHQ;AAIZC,QAAAA,QAAQ,EAAE;AACVb,UAAAA,QAAQ,EAAC,OADC;AAEVc,UAAAA,MAAM,EAAC;AAFG;AAJE;AAVF,KADmC;;AAAA,SA4C7CC,iBA5C6C,GA4C1BC,MAAD,IAAU;AAI5B,WAAKC,QAAL,CACA;AAACJ,QAAAA,QAAQ,EAAG,KAAKd,KAAL,CAAWM;AAAvB,OADA;AAIC,KApD4C;;AAAA,SAuD7Ca,eAvD6C,GAuD5B,YAAU;AAC3B,UAAG;AACH,cAAMZ,QAAQ,GAAG,MAAMb,KAAK,CAAC0B,IAAN,CAAY,mBAAZ,CAAvB;AACA,aAAKF,QAAL,CAAc;AAACT,UAAAA,SAAS,EAACF,QAAQ,CAACH;AAApB,SAAd;AAEC,OAJD,CAKA,OAAOiB,GAAP,EAAY;AACRC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD;AACF,KAhE4C;;AAAA,SAkE3CG,wBAlE2C,GAkEhB,OAAOvB,QAAP,EAAiBC,QAAjB,KAA8B;AACvDR,MAAAA,KAAK,CACF+B,GADH,CACQ,UAASxB,QAAS,GAD1B,EAC6B;AAACC,QAAAA;AAAD,OAD7B,EAEGwB,IAFH,CAESnB,QAAD,IAAc;AAClB,aAAKW,QAAL,CAAc;AACZV,UAAAA,aAAa,EAAED,QAAQ,CAACH,IAAT,CAAcuB;AADjB,SAAd;AAGD,OANH,EAOGD,IAPH,CAOQ,MAAM;AACV,aAAKE,iBAAL,CAAuB3B,QAAvB;AACD,OATH,EAUG4B,KAVH,CAUUR,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAVlB;AAWD,KA9E0C;;AAAA,SAgF3CS,uBAhF2C,GAgFjB,CAAC7B,QAAD,EAAWC,QAAX,KAAwB;AAChDR,MAAAA,KAAK,CACF0B,IADH,CACS,mBAAkBnB,QAAS,EADpC,EACsC;AAACC,QAAAA;AAAD,OADtC,EAEGwB,IAFH,CAESnB,QAAD,IAAc;AAClB,aAAKW,QAAL,CAAc;AACZV,UAAAA,aAAa,EAAED,QAAQ,CAACH,IAAT,CAAcuB;AADjB,SAAd;AAGD,OANH,EAOGD,IAPH,CAOQ,MAAM;AACV,aAAKE,iBAAL,CAAuB3B,QAAvB;AACD,OATH,EAWG4B,KAXH,CAWUR,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAXlB;AAYD,KA7F0C;;AAAA,SA+F3CO,iBA/F2C,GA+FvB,MAAO3B,QAAP,IAAoB;AACtC,UAAI,KAAKD,KAAL,CAAWQ,aAAf,EAA8B;AAC5Bd,QAAAA,KAAK,CACF+B,GADH,CACQ,UAASxB,QAAS,YAD1B,EAEGyB,IAFH,CAESnB,QAAD,IAAc;AAClB,eAAKW,QAAL,CAAc;AACZZ,YAAAA,IAAI,EAAEC,QAAQ,CAACH,IAAT,CAAcU;AADR,WAAd;AAGA,eAAKI,QAAL,CAAc;AACZf,YAAAA,SAAS,EAAE;AADC,WAAd;AAGD,SATH,EAUG0B,KAVH,CAUUR,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAVlB;AAWD,OAZD,MAYO;AACL,aAAKH,QAAL,CAAc;AACZf,UAAAA,SAAS,EAAE;AADC,SAAd;AAGD;AACF,KAjH0C;;AAAA,SAoH3C4B,oBApH2C,GAoHpB,OAAOd,MAAP,EAAcX,IAAd,KAAuB;AAC5C,UAAI,KAAKN,KAAL,CAAWQ,aAAf,EAA8B;AAC5Bd,QAAAA,KAAK,CACF+B,GADH,CACQ,UAASxB,QAAS,YAD1B,EAEGyB,IAFH,CAESnB,QAAD,IAAc;AAClB,eAAKW,QAAL,CAAc;AACZZ,YAAAA,IAAI,EAAEC,QAAQ,CAACH,IAAT,CAAcU;AADR,WAAd;AAGA,eAAKI,QAAL,CAAc;AACZf,YAAAA,SAAS,EAAE;AADC,WAAd;AAGD,SATH,EAUG0B,KAVH,CAUUR,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAVlB;AAWD,OAZD,MAYO;AACL,aAAKH,QAAL,CAAc;AACZf,UAAAA,SAAS,EAAE;AADC,SAAd;AAGD;AACF,KAtI0C;;AAAA,SAyI7C6B,iBAzI6C,GAyI1BC,OAAD,IAAW;AAC7B,YAAMvB,WAAW,GAAG,KAAKV,KAAL,CAAWS,SAAX,CAAqByB,MAArB,CAA4BC,KAAK,IAAEA,KAAK,CAACtB,GAAN,KAAcoB,OAAjD,CAApB;AACA,WAAKf,QAAL,CAAc;AACdR,QAAAA,WAAW,EAACA,WAAW,CAAC,CAAD;AADT,OAAd;AAGAY,MAAAA,OAAO,CAACC,GAAR,CAAYb,WAAZ;AACC,KA/I4C;;AAAA,SAkJ3C0B,WAlJ2C,GAkJ7B,OAAOzB,UAAP,EAAmBC,WAAnB,KAAmC;AAC/C,YAAMqB,OAAO,GAAGpC,MAAM,EAAtB;AACF,YAAMwC,SAAS,GAAG;AACZ1B,QAAAA,UADY;AAEZC,QAAAA,WAFY;AAGZqB,QAAAA;AAHY,OAAlB;AAOFvC,MAAAA,KAAK,CAAC0B,IAAN,CAAY,iBAAgB,KAAKpB,KAAL,CAAWM,IAAX,CAAgBL,QAAS,IAAG,KAAKD,KAAL,CAAWM,IAAX,CAAgBO,GAAI,EAA5E,EACEwB,SADF,EAEOX,IAFP,CAEanB,QAAD,IAAc;AAClBe,QAAAA,OAAO,CAACC,GAAR,CAAYhB,QAAQ,CAACH,IAArB,EAA2B,QAA3B;AACD,OAJP,EAKOyB,KALP,CAKcR,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CALtB;AAMG,KAjK0C;;AAAA,SAmK3CiB,cAnK2C,GAmK1B,MAAM;AACrB,WAAKpB,QAAL,CAAc;AACZf,QAAAA,SAAS,EAAE;AADC,OAAd;AAGD,KAvK0C;AAAA;;AAuB3CoC,EAAAA,iBAAiB,GAAG;AACnB,SAAKpB,eAAL;AACA,GAzB0C,CA2B3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;;AA8HAqB,EAAAA,MAAM,GAAG;AACP,wBACE,QAAC,YAAD,CAAc,QAAd;AACE,MAAA,KAAK,EAAE,EACL,GAAG,KAAKxC,KADH;AAELoC,QAAAA,WAAW,EAAE,KAAKA,WAFb;AAGLZ,QAAAA,wBAAwB,EAAE,KAAKA,wBAH1B;AAILM,QAAAA,uBAAuB,EAAE,KAAKA,uBAJzB;AAKLQ,QAAAA,cAAc,EAAE,KAAKA,cALhB;AAMfN,QAAAA,iBAAiB,EAAC,KAAKA;AANR,OADT;AAAA,gBAUG,KAAKS,KAAL,CAAWC;AAVd;AAAA;AAAA;AAAA;AAAA,YADF;AAcD;;AAxL0C;;AA2L7C,eAAe3C,oBAAf","sourcesContent":["import React, { createContext, Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\n// import dogImages from '../dogImages.json';\r\n// import catImages from '../catImages.json';\r\n// import birdImages from '../birdImages.json';\r\n\r\nexport const StateContext = createContext();\r\n\r\nclass StateContextProvider extends Component {\r\n  state = {\r\n    userName: \"\",\r\n    password: \"\",\r\n    loginUser: \"\",\r\n    data: \"\",\r\n    routeTo: \"\",\r\n    user: [],\r\n    response: \"\",\r\n    userConfirmed: false,\r\nallVideos:[],\r\nviewedVideo:{\r\nvideoTitle:\"\",\r\nvideoSource:\"\",\r\n_id:\"22233\",\r\nuserData :{\r\nuserName:\"Guest\",\r\nVideos:{}\r\n}\r\n\r\n},\r\n  };\r\n\r\n  componentDidMount() {\r\n  \tthis.handleGetVideos();\r\n  }\r\n\r\n  // shuffleCards = () => {\r\n  // \tlet images = this.state.displayedImages;\r\n  // \tfor (let i = images.length - 1; i > 0; i--) {\r\n  // \t\tconst j = Math.floor(Math.random() * (i + 1));\r\n  // \t\t[ images[i], images[j] ] = [ images[j], images[i] ];\r\n  // \t}\r\n  // \tthis.setState({\r\n  // \t\tdogImages: images\r\n  // \t});\r\n  // };\r\n\r\n  // shuffleImages = () => {\r\n  // \tlet num = Math.floor(Math.random() * this.state.images.length);\r\n  // \tthis.setState({\r\n  // \t\tdisplayedImages: this.state.images[num]\r\n  // \t});\r\n  // };\r\nhandleSetUserData=(userId)=>{\r\n\r\n\r\n\r\nthis.setState(\r\n{userData : this.state.user}\r\n\r\n)\r\n}\r\n\r\n\r\nhandleGetVideos= async ()=>{\r\ntry{\r\nconst response = await axios.post(`/download_videos/`)\r\nthis.setState({allVideos:response.data})\r\n\r\n}\r\ncatch (err) { \r\n    console.log(err);\r\n  } \r\n}\r\n\r\n  handleUserAuthentication = async (userName, password) => {\r\n    axios\r\n      .get(`/login/${userName}/`,{password})\r\n      .then((response) => {\r\n        this.setState({\r\n          userConfirmed: response.data.status,\r\n        });\r\n      })\r\n      .then(() => {\r\n        this.handleGetUserData(userName);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  handleCreateUserAccount = (userName, password) => {\r\n    axios\r\n      .post(`/create_account/${userName}`,{password})\r\n      .then((response) => {\r\n        this.setState({\r\n          userConfirmed: response.data.status,\r\n        });\r\n      })\r\n      .then(() => {\r\n        this.handleGetUserData(userName);\r\n      })\r\n\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  handleGetUserData = async (userName) => {\r\n    if (this.state.userConfirmed) {\r\n      axios\r\n        .get(`/login/${userName}/user_data`)\r\n        .then((response) => {\r\n          this.setState({\r\n            user: response.data.userData,\r\n          });\r\n          this.setState({\r\n            loginUser: true,\r\n          });\r\n        })\r\n        .catch((err) => console.log(err));\r\n    } else {\r\n      this.setState({\r\n        loginUser: false,\r\n      });\r\n    }\r\n  };\r\n\r\n\r\n  handleGetUserDataNew = async (userId,user) => {\r\n    if (this.state.userConfirmed) {\r\n      axios\r\n        .get(`/login/${userName}/user_data`)\r\n        .then((response) => {\r\n          this.setState({\r\n            user: response.data.userData,\r\n          });\r\n          this.setState({\r\n            loginUser: true,\r\n          });\r\n        })\r\n        .catch((err) => console.log(err));\r\n    } else {\r\n      this.setState({\r\n        loginUser: false,\r\n      });\r\n    }\r\n  };\r\n\r\n\r\nhandleViewedVideo=(videoId)=>{\r\nconst viewedVideo = this.state.allVideos.filter(video=>video._id === videoId)\r\nthis.setState({\r\nviewedVideo:viewedVideo[0]\r\n})\r\nconsole.log(viewedVideo)\r\n}\r\n\r\n\r\n  uploadVideo = async (videoTitle, videoSource) => {\r\n    const videoId = uuidv4();\r\n  const userVideo = {\r\n        videoTitle,\r\n        videoSource,\r\n        videoId,\r\n    };\r\n\r\n\r\naxios.post(`/upload_video/${this.state.user.userName}/${this.state.user._id}`\r\n, userVideo)\r\n      .then((response) => {\r\n        console.log(response.data, \"videos\");\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  resetLoginUser = () => {\r\n    this.setState({\r\n      loginUser: \"\",\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <StateContext.Provider\r\n        value={{\r\n          ...this.state,\r\n          uploadVideo: this.uploadVideo,\r\n          handleUserAuthentication: this.handleUserAuthentication,\r\n          handleCreateUserAccount: this.handleCreateUserAccount,\r\n          resetLoginUser: this.resetLoginUser,\r\nhandleViewedVideo:this.handleViewedVideo,\r\n        }}\r\n      >\r\n        {this.props.children}\r\n      </StateContext.Provider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default StateContextProvider;\r\n"]},"metadata":{},"sourceType":"module"}