{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Documents\\\\Node-js\\\\projects\\\\videostreamer\\\\FrontEnd\\\\src\\\\Context\\\\StateContext.jsx\";\nimport React, { createContext, Component } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport { v4 as uuidv4 } from \"uuid\"; // import dogImages from '../dogImages.json';\n// import catImages from '../catImages.json';\n// import birdImages from '../birdImages.json';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const StateContext = /*#__PURE__*/createContext();\n\nclass StateContextProvider extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      userName: \"\",\n      password: \"\",\n      loginUser: \"\",\n      data: \"\",\n      routeTo: \"\",\n      user: [],\n      response: \"\",\n      userConfirmed: false,\n      allVideos: [{\n        videoTitle: \"\",\n        videoSource: \"\",\n        _id: \"22233\"\n      }],\n      viewedVideo: {\n        videoTitle: \"\",\n        videoSource: \"\",\n        _id: \"22233\"\n      },\n      userData: {\n        userName: \"Guest\",\n        videos: []\n      },\n      videooo: \"\"\n    };\n\n    this.getplay = () => {};\n\n    this.handleGetVideos = async () => {\n      try {\n        const response = await axios.post(`/download_videos/`);\n        this.setState({\n          allVideos: response.data\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    this.handleUserAuthentication = async (userName, password) => {\n      let responseData = {};\n      axios.post(`/login/${userName}/`, {\n        password\n      }).then(response => {\n        responseData = response.data;\n        this.setState({\n          userConfirmed: responseData.status\n        });\n      }).then(() => {\n        this.handleLoginUser(userName, responseData.userId);\n      }).catch(err => console.log(err));\n    };\n\n    this.handleCreateUserAccount = (userName, password) => {\n      let responseData = {};\n      axios.post(`/create_account/${userName}`, {\n        password\n      }).then(response => {\n        responseData = response.data;\n        this.setState({\n          userConfirmed: responseData.status\n        });\n      }).then(() => {\n        this.handleLoginUser(userName, responseData.userId);\n      }).catch(err => console.log(err));\n    };\n\n    this.handleLoginUser = async (userName, userId) => {\n      if (this.state.userConfirmed) {\n        try {\n          const loginUser = await this.handleGetUserData(userId, userName, true);\n          this.setState({\n            loginUser\n          });\n        } catch (err) {\n          console.log(err);\n        }\n      } else {\n        this.setState({\n          loginUser: false\n        });\n      }\n    };\n\n    this.handleGetUserData = async (userId, userName, isUser) => {\n      if (userName === this.state.user.userName) {\n        return this.setState({\n          userData: this.state.user\n        });\n      }\n\n      try {\n        const response = await axios.post(`/login/${userName}/user_data`, {\n          userId\n        });\n\n        if (isUser) {\n          this.setState({\n            user: response.data.userData\n          });\n          this.setState({\n            userData: response.data.userData\n          });\n          return true;\n        } else {\n          this.setState({\n            userData: response.data.userData\n          });\n          return false;\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    this.handleViewedVideo = videoId => {\n      const viewedVideo = this.state.allVideos.filter(video => video._id === videoId);\n      this.setState({\n        viewedVideo: viewedVideo[0]\n      });\n      console.log(viewedVideo);\n    };\n\n    this.resetLoginUser = () => {\n      this.setState({\n        loginUser: \"\"\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.handleGetVideos();\n    this.getplay();\n  } // shuffleCards = () => {\n  // \tlet images = this.state.displayedImages;\n  // \tfor (let i = images.length - 1; i > 0; i--) {\n  // \t\tconst j = Math.floor(Math.random() * (i + 1));\n  // \t\t[ images[i], images[j] ] = [ images[j], images[i] ];\n  // \t}\n  // \tthis.setState({\n  // \t\tdogImages: images\n  // \t});\n  // };\n  // shuffleImages = () => {\n  // \tlet num = Math.floor(Math.random() * this.state.images.length);\n  // \tthis.setState({\n  // \t\tdisplayedImages: this.state.images[num]\n  // \t});\n  // };\n\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(StateContext.Provider, {\n      value: { ...this.state,\n        uploadVideo: this.uploadVideo,\n        handleUserAuthentication: this.handleUserAuthentication,\n        handleCreateUserAccount: this.handleCreateUserAccount,\n        resetLoginUser: this.resetLoginUser,\n        handleViewedVideo: this.handleViewedVideo\n      },\n      children: this.props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default StateContextProvider;","map":{"version":3,"sources":["C:/Users/LENOVO/Documents/Node-js/projects/videostreamer/FrontEnd/src/Context/StateContext.jsx"],"names":["React","createContext","Component","axios","useHistory","v4","uuidv4","StateContext","StateContextProvider","state","userName","password","loginUser","data","routeTo","user","response","userConfirmed","allVideos","videoTitle","videoSource","_id","viewedVideo","userData","videos","videooo","getplay","handleGetVideos","post","setState","err","console","log","handleUserAuthentication","responseData","then","status","handleLoginUser","userId","catch","handleCreateUserAccount","handleGetUserData","isUser","handleViewedVideo","videoId","filter","video","resetLoginUser","componentDidMount","render","uploadVideo","props","children"],"mappings":"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","sourcesContent":["import React, { createContext, Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\n// import dogImages from '../dogImages.json';\r\n// import catImages from '../catImages.json';\r\n// import birdImages from '../birdImages.json';\r\n\r\nexport const StateContext = createContext();\r\n\r\nclass StateContextProvider extends Component {\r\n  state = {\r\n    userName: \"\",\r\n    password: \"\",\r\n    loginUser: \"\",\r\n    data: \"\",\r\n    routeTo: \"\",\r\n    user: [],\r\n    response: \"\",\r\n    userConfirmed: false,\r\n    allVideos: [\r\n      {\r\n        videoTitle: \"\",\r\n        videoSource: \"\",\r\n        _id: \"22233\",\r\n      },\r\n    ],\r\n    viewedVideo: {\r\n      videoTitle: \"\",\r\n      videoSource: \"\",\r\n      _id: \"22233\",\r\n    },\r\n    userData: {\r\n      userName: \"Guest\",\r\n      videos: [],\r\n    },\r\nvideooo:\"\"\r\n  };\r\n\r\n\r\n\r\n  componentDidMount() {\r\n    this.handleGetVideos();\r\nthis.getplay()\r\n  }\r\n\r\n  // shuffleCards = () => {\r\n  // \tlet images = this.state.displayedImages;\r\n  // \tfor (let i = images.length - 1; i > 0; i--) {\r\n  // \t\tconst j = Math.floor(Math.random() * (i + 1));\r\n  // \t\t[ images[i], images[j] ] = [ images[j], images[i] ];\r\n  // \t}\r\n  // \tthis.setState({\r\n  // \t\tdogImages: images\r\n  // \t});\r\n  // };\r\n\r\n  // shuffleImages = () => {\r\n  // \tlet num = Math.floor(Math.random() * this.state.images.length);\r\n  // \tthis.setState({\r\n  // \t\tdisplayedImages: this.state.images[num]\r\n  // \t});\r\n  // };\r\n\r\n\r\ngetplay=()=>{\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\n  handleGetVideos = async () => {\r\n    try {\r\n      const response = await axios.post(`/download_videos/`);\r\n      this.setState({ allVideos: response.data });\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  handleUserAuthentication = async (userName, password) => {\r\n    let responseData = {};\r\n\r\n    axios\r\n      .post(`/login/${userName}/`, { password })\r\n      .then((response) => {\r\n        responseData = response.data;\r\n\r\n        this.setState({\r\n          userConfirmed: responseData.status,\r\n        });\r\n      })\r\n      .then(() => {\r\n        this.handleLoginUser(userName, responseData.userId);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  handleCreateUserAccount = (userName, password) => {\r\n    let responseData = {};\r\n\r\n    axios\r\n      .post(`/create_account/${userName}`, { password })\r\n      .then((response) => {\r\n        responseData = response.data;\r\n\r\n        this.setState({\r\n          userConfirmed: responseData.status,\r\n        });\r\n      })\r\n      .then(() => {\r\n        this.handleLoginUser(userName, responseData.userId);\r\n      })\r\n\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  handleLoginUser = async (userName, userId) => {\r\n    if (this.state.userConfirmed) {\r\n      try {\r\n        const loginUser = await this.handleGetUserData(userId, userName, true);\r\n\r\n        this.setState({\r\n          loginUser,\r\n        });\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    } else {\r\n      this.setState({\r\n        loginUser: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  handleGetUserData = async (userId, userName, isUser) => {\r\n    if (userName === this.state.user.userName) {\r\n      return this.setState({\r\n        userData: this.state.user,\r\n      });\r\n    }\r\n\r\n    try {\r\n      const response = await axios.post(`/login/${userName}/user_data`, {\r\n        userId,\r\n      });\r\n      if (isUser) {\r\n        this.setState({\r\n          user: response.data.userData,\r\n        });\r\n        this.setState({\r\n          userData: response.data.userData,\r\n        });\r\n\r\n        return true;\r\n      } else {\r\n        this.setState({\r\n          userData: response.data.userData,\r\n        });\r\n        return false;\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  handleViewedVideo = (videoId) => {\r\n    const viewedVideo = this.state.allVideos.filter(\r\n      (video) => video._id === videoId\r\n    );\r\n    this.setState({\r\n      viewedVideo: viewedVideo[0],\r\n    });\r\n    console.log(viewedVideo);\r\n  };\r\n\r\n  // uploadVideo = async (videoTitle, videoSource) => {\r\n  //   const videoId = uuidv4();\r\n  //   const userVideo = {\r\n  //     videoTitle,\r\n  //     videoSource,\r\n  //     videoId,\r\n  //   };\r\n\r\n  //   axios\r\n  //     .post(\r\n  //       `/upload_video/${this.state.user.userName}/${this.state.user._id}`,\r\n  //       userVideo\r\n  //     )\r\n  //     .then((response) => {\r\n  //       // console.log(response.data, \"videos\");\r\n  //     })\r\n  //     .catch((err) => console.log(err));\r\n  //   this.handleGetVideos();\r\n  // };\r\n\r\n  resetLoginUser = () => {\r\n    this.setState({\r\n      loginUser: \"\",\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <StateContext.Provider\r\n        value={{\r\n          ...this.state,\r\n          uploadVideo: this.uploadVideo,\r\n          handleUserAuthentication: this.handleUserAuthentication,\r\n          handleCreateUserAccount: this.handleCreateUserAccount,\r\n          resetLoginUser: this.resetLoginUser,\r\n          handleViewedVideo: this.handleViewedVideo,\r\n        }}\r\n      >\r\n        {this.props.children}\r\n      </StateContext.Provider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default StateContextProvider;\r\n"]},"metadata":{},"sourceType":"module"}