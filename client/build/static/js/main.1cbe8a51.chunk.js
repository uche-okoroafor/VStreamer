(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{305:function(e,t,n){},485:function(e,t,n){},486:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(23),o=n.n(i),s=(n(305),n(568)),c=n(278),l=Object(c.a)({typography:{fontFamily:'"Open Sans", "sans-serif", "Roboto"',fontSize:12,button:{textTransform:"none",fontWeight:700}},palette:{primary:{main:"#3A8DFF"},secondary:{main:"#ef3f40"},success:{main:"#199401"},warning:{main:"#F40F11"}},shape:{borderRadius:5}}),u=n(85),d=n(22),p=n(550),b=n(571),j=n(559),h=n(160),m=n(548),x=n.p+"static/media/backgroundImg.b802b849.jpg",f=Object(m.a)((function(){return{root:{height:"100vh",position:"fixed",top:0,background:"linear-gradient( rgba(0, 0, 0, 0.3) 100%, rgba(0, 0, 0, 0.3)100%),url(".concat(x,")"),backgroundRepeat:" no-repeat",backgroundSize:"cover",backgroundAttachment:"fixed",backgroundPosition:"center",padding:"20px",paddingTop:"0"},authWrapper:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexDirection:"column",minHeight:"100vh",width:"100%",paddingTop:23},welcome:{fontSize:26,paddingBottom:20,color:"#000000",fontWeight:700,fontFamily:"'Open Sans'"},loginContainer:{background:"rgb(25, 118, 210,0.8)",padding:"20px 30px"}}})),v=n(4),g=n.n(v),O=n(9),w=function(){var e=Object(O.a)(g.a.mark((function e(t,n){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n}),credentials:"include"},e.next=3,fetch("/auth/login",r).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=n(552),k=n(569),S=n(154),C=n(73),I=Object(m.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1),color:"white",paddingBottom:0},label:{fontSize:19,color:"white",paddingLeft:"5px"},inputs:{marginTop:".8rem",height:"2rem",padding:"5px",borderRadius:"5px"},forgot:{paddingRight:10,color:"#3a8dff",marginLeft:"10px"},submit:{margin:e.spacing(3,2,2),padding:10,width:160,height:56,borderRadius:e.shape.borderRadius,marginTop:49,fontSize:16,backgroundColor:"#3a8dff",fontWeight:"bold"}}})),D=n(553),V=n(1);function U(e){var t=e.handleSubmit,n=I();return Object(V.jsx)(S.a,{initialValues:{email:"",password:""},validationSchema:C.a().shape({email:C.b().required("Email is required").email("Email is not valid"),password:C.b().required("Password is required").max(100,"Password is too long").min(6,"Password too short")}),onSubmit:t,children:function(e){var t=e.handleSubmit,r=e.handleChange,a=e.values,i=e.touched,o=e.errors,s=e.isSubmitting;return Object(V.jsxs)("form",{onSubmit:t,className:n.form,noValidate:!0,children:[Object(V.jsx)(k.a,{id:"email",label:Object(V.jsx)(h.a,{className:n.label,children:"E-mail address"}),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{classes:{input:n.inputs}},name:"email",autoComplete:"email",autoFocus:!0,helperText:i.email?o.email:"",error:i.email&&Boolean(o.email),value:a.email,onChange:r}),Object(V.jsx)(k.a,{id:"password",label:Object(V.jsx)(h.a,{className:n.label,children:"Password"}),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{classes:{input:n.inputs}},type:"password",autoComplete:"current-password",helperText:i.password?o.password:"",error:i.password&&Boolean(o.password),value:a.password,onChange:r}),Object(V.jsx)(b.a,{textAlign:"center",children:Object(V.jsx)(y.a,{type:"submit",size:"large",variant:"contained",color:"primary",className:n.submit,children:s?Object(V.jsx)(D.a,{style:{color:"white"}}):"Login"})})]})}})}var P=n(577),T=Object(m.a)((function(e){return{authHeader:{alignSelf:"flex-end",justifyContent:"flex-end",alignItems:"center",display:"flex",flexWrap:"wrap"},accAside:{fontSize:14,color:"#b0b0b0",fontWeight:400,textAlign:"center",marginRight:35,whiteSpace:"nowrap",display:"flex",alignItems:"center",padding:"1rem 0"},link:{textDecoration:"none"},accBtn:{borderRadius:e.shape.borderRadius,filter:"drop-shadow(0px 2px 6px rgba(74,106,149,0.2))",backgroundColor:"#ffffff",color:"#3a8dff",boxShadow:"none"}}})),z=n(581),B=n(582),E=function(e){var t=e.linkTo,n=e.asideText,r=e.btnText,a=T();return Object(V.jsxs)(z.a,{display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between",children:[Object(V.jsx)(z.a,{sx:{marginLeft:{sm:"14px",xs:"0",md:"23px"}},children:Object(V.jsx)(B.a,{variant:"h4",sx:{fontSize:{sm:"1.6rem",xs:"1.5rem",md:"2rem"}},children:"VStreamer"})}),Object(V.jsxs)(z.a,{className:a.authHeader,children:[Object(V.jsx)(B.a,{className:a.accAside,sx:{display:{sm:"none",xs:"none",md:"inline"},margin:"0 10px"},children:n}),Object(V.jsx)(u.b,{to:t,className:a.link,children:Object(V.jsx)(P.a,{color:"primary",className:a.accBtn,sx:{width:{xs:130,sm:150,md:170},height:{xs:40,sm:45,md:54},whiteSpace:"nowrap"},variant:"contained",children:Object(V.jsx)(B.a,{variant:"subtitle2",children:r})})})]})," "]})},N=n(7),A=function(){var e=Object(O.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",credentials:"include"},e.next=3,fetch("/auth/user",t).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(O.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",credentials:"include"},e.next=3,fetch("/auth/logout",t).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=Object(r.createContext)({loggedInUser:void 0,updateLoginContext:function(){return null},logout:function(){return null}}),F=function(e){var t=e.children,n=Object(r.useState)(),a=Object(N.a)(n,2),i=a[0],o=a[1],s=Object(d.g)(),c=Object(r.useCallback)((function(e){o(e.user),s.push("/home")}),[s]),l=Object(r.useCallback)(Object(O.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M().then((function(){s.push("/login"),o(null)})).catch((function(e){return console.error(e)}));case 2:case"end":return e.stop()}}),e)}))),[s]);return Object(r.useEffect)((function(){(function(){var e=Object(O.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A().then((function(e){e.success?(c(e.success),s.push("/home")):(o(null),s.push("/login"))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c,s]),Object(V.jsx)(R.Provider,{value:{loggedInUser:i,updateLoginContext:c,logout:l},children:t})};function W(){return Object(r.useContext)(R)}var L=n(576),G=n(558),H=n(265),_=n.n(H),Y=Object(r.createContext)({updateSnackBarMessage:function(){return null}}),q=function(e){var t=e.children,n=Object(r.useState)(null),a=Object(N.a)(n,2),i=a[0],o=a[1],s=Object(r.useState)(!1),c=Object(N.a)(s,2),l=c[0],u=c[1],d=Object(r.useCallback)((function(e){o(e),u(!0)}),[]),p=Object(r.useCallback)((function(){u(!1)}),[]),b=Object(r.useCallback)((function(e,t){"clickaway"!==t&&u(!1)}),[]);return Object(V.jsxs)(Y.Provider,{value:{updateSnackBarMessage:d},children:[t,Object(V.jsx)(L.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:l,autoHideDuration:6e3,onClose:b,message:i,action:Object(V.jsx)(G.a,{size:"small","aria-label":"close",color:"inherit",onClick:p,children:Object(V.jsx)(_.a,{fontSize:"small"})})})]})};function J(){return Object(r.useContext)(Y)}var $=n(21),K=n.n($),Q=function(){var e=Object(O.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.a.post("/videos/all-videos");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(O.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.post("/videos/delete-video",{videoId:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=Object(r.createContext)({handleGetAllVideos:function(){return null},handleSetWatchVideo:function(){return null},allVideos:void 0,watchVideo:void 0}),ee=function(e){var t=e.children,n=Object(r.useState)(void 0),a=Object(N.a)(n,2),i=a[0],o=a[1],s=Object(r.useState)(void 0),c=Object(N.a)(s,2),l=c[0],u=c[1],d=J().updateSnackBarMessage,p=function(){var e=Object(O.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q();case 3:(t=e.sent)&&o(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),d("videos is not updated");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){p()}),[]),Object(V.jsx)(Z.Provider,{value:{allVideos:i,watchVideo:l,handleGetAllVideos:p,handleSetWatchVideo:function(e){if(i){var t=i.filter((function(t){return t._id===(null===e||void 0===e?void 0:e._id)}));u(t[0])}}},children:t})};function te(){return Object(r.useContext)(Z)}function ne(){var e=f(),t=W().updateLoginContext,n=J().updateSnackBarMessage,a=te(),i=a.allVideos,o=a.handleGetAllVideos;Object(r.useEffect)((function(){void 0===i&&o()}),[i]);return Object(V.jsx)(j.a,{container:!0,component:"main",className:e.root,children:Object(V.jsxs)(b.a,{className:e.authWrapper,style:{color:"white"},children:[Object(V.jsx)(E,{linkTo:"/signup",asideText:"Don't have an account?",btnText:"Create account"}),Object(V.jsx)(b.a,{width:"100%",maxWidth:500,p:3,alignSelf:"center",children:Object(V.jsxs)(p.a,{elevation:5,className:e.loginContainer,children:[Object(V.jsx)(j.a,{container:!0,children:Object(V.jsx)(j.a,{item:!0,xs:!0,children:Object(V.jsx)(h.a,{className:e.welcome,align:"center",style:{color:"white"},component:"h1",variant:"h5",children:"Sign in"})})}),Object(V.jsx)(U,{handleSubmit:function(e,r){var a=e.email,i=e.password,o=r.setSubmitting;w(a,i).then((function(e){e.error?(o(!1),n(e.error.message)):e.success?t(e.success):(console.error({data:e}),o(!1),n("An unexpected error occurred. Please try again"))}))}})]})}),Object(V.jsx)(b.a,{alignSelf:"center"})]})})}var re=Object(m.a)((function(){return{root:{height:"100vh",position:"fixed",top:0,background:"linear-gradient( rgba(0, 0, 0, 0.3) 100%, rgba(0, 0, 0, 0.3)100%),url(".concat(x,")"),backgroundRepeat:" no-repeat",backgroundSize:"cover",backgroundAttachment:"fixed",backgroundPosition:"center",padding:"20px",color:"white",paddingTop:"0"},signupContainer:{background:"rgb(25, 118, 210,0.8)",padding:"20px 30px"},authWrapper:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexDirection:"column",minHeight:"100vh",width:"100%",paddingTop:23},welcome:{fontSize:26,paddingBottom:10,color:"#ffffff",fontWeight:700,fontFamily:"'Open Sans'"}}})),ae=function(){var e=Object(O.a)(g.a.mark((function e(t,n,r){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,email:n,password:r}),credentials:"include"},e.next=3,fetch("/auth/register",a).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ie=Object(m.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},label:{fontSize:19,color:"white",paddingLeft:"5px"},inputs:{marginTop:".8rem",height:"2rem",padding:"5px",borderRadius:"5px"},forgot:{paddingRight:10,color:"#3a8dff"},submit:{margin:e.spacing(3,2,2),padding:10,width:160,height:56,borderRadius:e.shape.borderRadius,marginTop:49,fontSize:16,backgroundColor:"#3a8dff",fontWeight:"bold"}}})),oe=function(e){var t=e.handleSubmit,n=ie();return Object(V.jsx)(S.a,{initialValues:{email:"",password:"",username:""},validationSchema:C.a().shape({username:C.b().required("Username is required").max(40,"Username is too long"),email:C.b().required("Email is required").email("Email is not valid"),password:C.b().required("Password is required").max(100,"Password is too long").min(6,"Password too short")}),onSubmit:t,children:function(e){var t=e.handleSubmit,r=e.handleChange,a=e.values,i=e.touched,o=e.errors,s=e.isSubmitting;return Object(V.jsxs)("form",{onSubmit:t,className:n.form,noValidate:!0,children:[Object(V.jsx)(k.a,{id:"username",label:Object(V.jsx)(h.a,{className:n.label,children:"Username"}),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{classes:{input:n.inputs}},name:"username",autoComplete:"username",autoFocus:!0,helperText:i.username?o.username:"",error:i.username&&Boolean(o.username),value:a.username,onChange:r}),Object(V.jsx)(k.a,{id:"email",label:Object(V.jsx)(h.a,{className:n.label,children:"E-mail address"}),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{classes:{input:n.inputs}},name:"email",autoComplete:"email",helperText:i.email?o.email:"",error:i.email&&Boolean(o.email),value:a.email,onChange:r}),Object(V.jsx)(k.a,{id:"password",label:Object(V.jsx)(h.a,{className:n.label,children:"Password"}),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{classes:{input:n.inputs}},type:"password",autoComplete:"current-password",helperText:i.password?o.password:"",error:i.password&&Boolean(o.password),value:a.password,onChange:r}),Object(V.jsx)(b.a,{textAlign:"center",children:Object(V.jsx)(y.a,{type:"submit",size:"large",variant:"contained",color:"primary",className:n.submit,children:s?Object(V.jsx)(D.a,{style:{color:"white"}}):"Create account"})})]})}})};function se(){var e=re(),t=W().updateLoginContext,n=J().updateSnackBarMessage;return Object(V.jsx)(j.a,{container:!0,component:"main",className:e.root,children:Object(V.jsxs)(b.a,{className:e.authWrapper,children:[Object(V.jsx)(E,{linkTo:"/login",asideText:"Already have an account?",btnText:"Login"}),Object(V.jsx)(b.a,{width:"100%",maxWidth:500,p:3,alignSelf:"center",children:Object(V.jsxs)(p.a,{elevation:5,className:e.signupContainer,children:[Object(V.jsx)(j.a,{container:!0,children:Object(V.jsx)(j.a,{item:!0,xs:!0,children:Object(V.jsx)(h.a,{className:e.welcome,align:"center",component:"h1",variant:"h5",children:"Create an account"})})}),Object(V.jsx)(oe,{handleSubmit:function(e,r){var a=e.username,i=e.email,o=e.password,s=r.setSubmitting;ae(a,i,o).then((function(e){e.error?(console.error({error:e.error.message}),s(!1),n(e.error.message)):e.success?t(e.success):(console.error({data:e}),s(!1),n("An unexpected error occurred. Please try again"))}))}})]})}),Object(V.jsx)(b.a,{p:1,alignSelf:"center"})]})})}var ce=n(266),le=Object(r.createContext)({socket:void 0,initSocket:function(){return null}}),ue=function(e){var t=e.children,n=Object(r.useState)(void 0),a=Object(N.a)(n,2),i=a[0],o=a[1],s=Object(r.useCallback)((function(){console.log("trying to connect"),o(Object(ce.io)("/",{withCredentials:!0}))}),[]);return Object(V.jsx)(le.Provider,{value:{socket:i,initSocket:s},children:t})};var de=n(35),pe=n(585),be=n(586),je=n(584),he=n(270),me=n.n(he),xe=n.p+"static/media/logo.240aab52.svg",fe=n(267),ve=n.n(fe),ge=n(11),Oe=n(573),we=n(14),ye=n(554),ke=Object(we.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),Se=Object(we.a)("div")((function(e){var t,n=e.theme;return t={position:"relative",borderRadius:n.shape.borderRadius,backgroundColor:Object(ye.a)(n.palette.common.white,.15),"&:hover":{backgroundColor:Object(ye.a)(n.palette.common.white,.25)},marginRight:n.spacing(2),marginLeft:0,width:"60%"},Object(ge.a)(t,n.breakpoints.up(1200),{marginLeft:n.spacing(3),width:"60%"}),Object(ge.a)(t,n.breakpoints.down(1200),{marginLeft:n.spacing(3),width:"50%"}),Object(ge.a)(t,n.breakpoints.down(1044),{marginLeft:n.spacing(3),width:"40%"}),Object(ge.a)(t,n.breakpoints.down(900),{marginLeft:n.spacing(3),width:"60%"}),Object(ge.a)(t,n.breakpoints.down(500),{marginLeft:n.spacing(2),width:"100%"}),t})),Ce=Object(we.a)(Oe.a)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":{padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width")}}})),Ie=Object(m.a)((function(e){return{search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:"#E9EEF9",marginLeft:0,height:"50px",lineHeight:"18px",width:"calc(".concat(240," - 2rem)")},searchRoot:{color:"inherit",width:"100%",height:"100%"},searchInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),width:"100%",fontWeight:600},searchIcon:{height:"100%",position:"absolute",pointerEvents:"none",marginLeft:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},drawer:{position:"absolute",width:"100%",transition:"height 1s",bottom:"0%",borderEndEndRadius:"5px",borderBottomLeftRadius:"5px",overFlow:"hidden"},drawerBackDrop:{position:"fixed",height:"100vh",width:"100%",bgColor:"black",left:0,top:0,zIndex:1,cursor:" pointer"}}})),De=n(97),Ve=n(563),Ue=n(551),Pe=n(494),Te=n(562);var ze=function(e){var t=e.searchedVideo,n=e.setSearchedVideo,a=e.toggleDrawer,i=te(),o=i.allVideos,s=i.handleSetWatchVideo,c=Object(r.useState)([]),l=Object(N.a)(c,2),u=l[0],p=l[1],b=Object(d.g)();return Object(r.useEffect)((function(){t&&function(){if(o){var e=o.filter((function(e){var n=t.replace(/\s+/g,"").toLowerCase();return e.videoTitle.toLowerCase().includes(n)}));p(e)}}()}),[t]),Object(V.jsx)(Ue.a,{children:u.length?u.map((function(e){return Object(V.jsx)(Pe.a,{button:!0,onClick:function(){return function(e){s(e),a(!1,"0",0,null),n(""),b.push("/watch/"+e.videoTitle)}(e)},children:Object(V.jsx)(Te.a,{primary:e.videoTitle})},e.videoId)})):Object(V.jsxs)(Pe.a,{children:[Object(V.jsx)(h.a,{variant:"h6",align:"center",children:"Search not found"})," "]})})};function Be(){var e=Object(r.useState)(""),t=Object(N.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(!1),o=Object(N.a)(i,2),s=o[0],c=o[1],l=Object(r.useState)("0"),u=Object(N.a)(l,2),d=(u[0],u[1]),b=Object(r.useState)(0),j=Object(N.a)(b,2),h=j[0],m=j[1],x=Object(De.a)(),f=(Object(Ve.a)(x.breakpoints.up("sm")),Ie()),v=function(e,t,n,r){(null===r||"keydown"!==r.type||"Tab"!==r.key&&"Shift"!==r.key)&&(d(t),m(n),c(e))};return Object(r.useEffect)((function(){n.length&&v(!0,"auto",2,null)}),[n]),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(Se,{style:{zIndex:h},children:[Object(V.jsx)(ke,{children:Object(V.jsx)(ve.a,{})}),Object(V.jsx)(Ce,{placeholder:"Search for Videos\u2026",value:n,onChange:function(e){return a(e.target.value)},inputProps:{"aria-label":"search"}}),s&&Object(V.jsx)(z.a,{className:f.drawer,sx:{zIndex:"modal",height:0,color:"text.primary"},role:"presentation",onClick:function(e){return v(!1,"0",0,e)},children:Object(V.jsx)(p.a,{children:Object(V.jsx)(ze,{searchedVideo:n,setSearchedVideo:a,toggleDrawer:v})})})]}),s&&Object(V.jsx)(z.a,{onClick:function(e){return v(!1,"0",0,e)},className:f.drawerBackDrop})]})}var Ee=function(){var e=Object(O.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.get("/users/get-details/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=Object(r.createContext)({handleGetUserDetails:function(){return null},userVideos:void 0,userDetails:void 0}),Ae=function(e){var t=e.children,n=Object(r.useState)(void 0),a=Object(N.a)(n,2),i=a[0],o=a[1],s=Object(r.useState)(void 0),c=Object(N.a)(s,2),l=c[0],u=c[1],d=(J().updateSnackBarMessage,function(){var e=Object(O.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ee(t.id);case 3:n=e.sent,console.log(null===n||void 0===n?void 0:n.data,"response?.data"),(null===n||void 0===n?void 0:n.data)&&(o(n.data.videos),u(n.data)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}());return Object(V.jsx)(Ne.Provider,{value:{userVideos:i,userDetails:l,handleGetUserDetails:d},children:t})};function Me(){return Object(r.useContext)(Ne)}var Re=n(580),Fe=function(e){var t,n=0;for(t=0;t<e.length;t+=1)n=e.charCodeAt(t)+((n<<5)-n);var r="#";for(t=0;t<3;t+=1){r+="00".concat((n>>8*t&255).toString(16)).substr(-2)}return r},We=function(e,t,n){return{sx:{bgcolor:Fe(e),width:t,height:n},children:"".concat(e[0])}},Le=Object(m.a)((function(e){return{profile:{color:"white"},videos:{minHeight:"90vh"},videoContainer:Object(ge.a)({display:"flex",margin:"10px",padding:"10px",borderRadius:"5px",textOverflow:"ellipsis"},e.breakpoints.down(1200),{flexDirection:"column"}),videoDetailsContainer:Object(ge.a)({padding:"0 10px"},e.breakpoints.down(1200),{paddingTop:"10px"}),iconButton:{position:"absolute",right:"10%",top:"80%",background:"green","&:hover":{background:"green"}},bottomSpace:{marginBottom:"30px"}}})),Ge=n(565),He=n(574),_e=n(570),Ye=n(151),qe=n.n(Ye),Je=n(150),$e=n.n(Je),Ke=n(269),Qe=n.n(Ke),Xe=n(268),Ze=n.n(Xe);function et(e){var t=e.loggedInUser,n=(e.anchorEl,e.mobileMoreAnchorEl),r=e.setMobileMoreAnchorEl,a=e.setAnchorEl,i=(Boolean(n),Boolean(n)),o=W().logout,s=Object(d.g)(),c=Me().handleGetUserDetails,l=function(){var e=Object(O.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:s.push("/profile/".concat(t.username));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(e){"logout"===e?o():"profile"===e?l():"Home"===e?s.push("/home"):s.push("/upload-video"),a(null),p()},p=function(){r(null)};return Object(V.jsxs)(_e.a,{anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:i,onClose:p,children:[Object(V.jsx)(He.a,{onClick:function(){return u("Home")},children:Object(V.jsxs)(Ge.a,{direction:"row",justifyContent:"center",alignItems:"center",children:[Object(V.jsx)(je.a,{size:"large","aria-label":"show 4 new mails",color:"inherit",children:Object(V.jsx)(Ze.a,{color:"primary"})}),Object(V.jsx)(z.a,{style:{color:"#1976D2"},children:"Home"})]})}),Object(V.jsx)(He.a,{onClick:function(){return u("profile")},children:Object(V.jsxs)(Ge.a,{direction:"row",justifyContent:"center",alignItems:"center",children:[Object(V.jsx)(je.a,{size:"large","aria-label":"show 4 new mails",color:"inherit",children:Object(V.jsx)($e.a,{color:"primary"})}),Object(V.jsx)(z.a,{style:{color:"#1976D2"},children:"Profile"})]})}),Object(V.jsx)(He.a,{onClick:function(){return u("upload")},children:Object(V.jsxs)(Ge.a,{direction:"row",justifyContent:"center",alignItems:"center",children:[Object(V.jsx)(je.a,{size:"large","aria-label":"show 4 new mails",color:"inherit",children:Object(V.jsx)(Qe.a,{color:"primary"})}),Object(V.jsx)(z.a,{style:{color:"#1976D2"},children:"Upload Video"})]})}),Object(V.jsx)(He.a,{onClick:function(){return u("logout")},children:Object(V.jsxs)(Ge.a,{direction:"row",justifyContent:"center",alignItems:"center",children:[Object(V.jsx)(je.a,{size:"large","aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",children:Object(V.jsx)(qe.a,{color:"primary"})}),Object(V.jsx)(z.a,{style:{color:"#1976D2"},children:"Logout"})," "]})})]})}function tt(e){var t=e.loggedInUser,n=e.anchorEl,r=e.setAnchorEl,a=Boolean(n),i=W().logout,o=Object(d.g)(),s=Me().handleGetUserDetails,c=function(){var e=Object(O.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(t);case 2:o.push("/profile/".concat(t.username));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(e){"logout"===e?i():"profile"===e&&c(),r(null)};return Object(V.jsxs)(_e.a,{anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:a,onClose:l,children:[Object(V.jsx)(He.a,{onClick:function(){return l("profile")},children:Object(V.jsxs)(Ge.a,{direction:"row",justifyContent:"center",alignItems:"center",children:[Object(V.jsx)(je.a,{size:"large","aria-label":"show 4 new mails",color:"primary",children:Object(V.jsx)($e.a,{})}),Object(V.jsx)(z.a,{style:{color:"#1976D2"},children:"Profile"})]})}),Object(V.jsxs)(He.a,{onClick:function(){return l("logout")},children:[" ",Object(V.jsxs)(Ge.a,{direction:"row",justifyContent:"center",alignItems:"center",children:[Object(V.jsx)(je.a,{size:"large","aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"primary",children:Object(V.jsx)(qe.a,{})}),Object(V.jsx)(z.a,{style:{color:"#1976D2"},children:"Logout"})," "]})]})]})}function nt(e){var t=e.loggedInUser,n=r.useState(null),a=Object(N.a)(n,2),i=a[0],o=a[1],s=r.useState(null),c=Object(N.a)(s,2),l=c[0],u=c[1],p=(Boolean(i),Boolean(l),W().logout,Object(d.g)()),b=Me().handleGetUserDetails,j=function(){var e=Object(O.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t);case 2:p.push("/profile/".concat(t.username));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=Object(V.jsx)(tt,{loggedInUser:t,setAnchorEl:o,anchorEl:i}),m=Object(V.jsx)(et,{setMobileMoreAnchorEl:u,loggedInUser:t,setAnchorEl:o,mobileMoreAnchorEl:l,anchorEl:i});return Object(V.jsxs)(z.a,{sx:{flexGrow:1},children:[Object(V.jsx)(pe.a,{position:"static",children:Object(V.jsxs)(be.a,{sx:{height:50},children:[Object(V.jsx)(je.a,{size:"large",edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){return"/home"},sx:{mr:2},children:Object(V.jsxs)(z.a,{display:"flex",justifyContent:"center",children:[" ",Object(V.jsx)("img",{src:xe,alt:"logo",style:{marginRight:"10px"}})," ",Object(V.jsx)(B.a,{variant:"h6",noWrap:!0,component:"div",sx:{display:{xs:"none",sm:"block"}},children:"VStreamer"})]})}),Object(V.jsx)(Be,{}),Object(V.jsx)(z.a,{sx:{flexGrow:1}}),Object(V.jsxs)(z.a,{sx:{display:{xs:"none",md:"flex"}},children:[Object(V.jsx)(je.a,{size:"large","aria-label":"show 4 new mails",color:"inherit",onClick:function(){return p.push("/home")},children:Object(V.jsx)(B.a,{children:"Home"})}),Object(V.jsx)(je.a,{size:"large","aria-label":"show 17 new notifications",color:"inherit",onClick:j,children:Object(V.jsx)(B.a,{children:"My Account"})}),Object(V.jsx)(je.a,{size:"large","aria-label":"show 17 new notifications",color:"inherit",onClick:function(){return p.push("/upload-video")},children:Object(V.jsx)(B.a,{children:"Upload Video"})}),Object(V.jsx)(je.a,{size:"large",edge:"end","aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},color:"inherit",children:Object(V.jsx)(Re.a,Object(de.a)(Object(de.a)({},We(t.username.toUpperCase(),50,50)),{},{src:"/image/get-image/".concat(t.id)}))})]}),Object(V.jsx)(z.a,{sx:{display:{xs:"flex",md:"none"}},children:Object(V.jsx)(je.a,{size:"large","aria-label":"show more","aria-controls":"primary-search-account-menu-mobile","aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},color:"inherit",children:Object(V.jsx)(me.a,{})})})]})}),m,h]})}var rt=function(){var e=W().loggedInUser,t=(Me().userDetails,Object(d.g)()),n=Object(r.useContext)(le).initSocket;return Object(r.useEffect)((function(){n()}),[n]),void 0===e?Object(V.jsx)(D.a,{}):e?Object(V.jsx)(b.a,{style:{display:e?"block":"none",position:"fixed",width:"100%",top:0,left:0,zIndex:1e3},children:Object(V.jsx)(nt,{loggedInUser:e})}):(t.push("/login"),Object(V.jsx)(D.a,{}))},at=n(587),it=n(271),ot=n.n(it);function st(e){var t=e.videoSource,n=e.videoPlayerOptions,r=e.setVideoDuration,a=n.width,i=n.height,o=n.autoPlay,s=n.component;n.classes;return Object(V.jsx)(V.Fragment,{children:t?Object(V.jsx)(ot.a,{playing:o,controls:!0,width:parseInt(a),onDuration:function(e){return function(e){r((e/60).toFixed(2).toString())}(e)},height:parseInt(i),style:{zIndex:0},url:t}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)("video",{id:"videoId",autoPlay:o,width:a,height:i,controls:!0,style:{zIndex:0},children:[Object(V.jsx)("source",{src:t,type:"video/mp4"}),Object(V.jsx)("source",{src:t,type:"video/ogg"}),"Your browser does not support HTML video."]}),"UploadVideoForm"!==s?Object(V.jsx)(at.a,{sx:{position:"absolute",top:"40%",right:"45%",color:"white"}}):Object(V.jsx)(B.a,{children:"Select video"})]})})}var ct=n(583),lt=n(81),ut=n.n(lt);function dt(e){var t=e.renderedComponent,n=e.video,a=W().loggedInUser,i=Me().userDetails,o=Object(r.useState)(!1),s=Object(N.a)(o,2),c=s[0],l=s[1],u=te().handleGetAllVideos,d=Object(r.useState)(!1),p=Object(N.a)(d,2),b=p[0],j=p[1],h=J().updateSnackBarMessage;Object(r.useEffect)((function(){a&&i&&(a.username===i.username&&"Profile"===t?l(!0):l(!1))}),[a,i,t]);var m=function(){var e=Object(O.a)(g.a.mark((function e(){var t,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,X(n._id);case 4:t=e.sent,(null===(r=t.data)||void 0===r?void 0:r.success)?(u(),h("video successfully deleted")):h("video not deleted, Please try again later"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),h("video not deleted, Please try again later");case 13:j(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(V.jsx)(V.Fragment,{children:c&&Object(V.jsx)(z.a,{display:"flex",justifyContent:"space-between",sx:{position:"absolute",bottom:0,right:0},children:Object(V.jsx)(P.a,{startIcon:Object(V.jsx)(ut.a,{}),disabled:b,onClick:m,variant:"contained",color:"warning",children:b?Object(V.jsx)(at.a,{style:{fontSize:0,width:"20px",height:"20px"}}):"Delete"})})})}var pt=Object(m.a)((function(e){return{textSpacing:{margin:"5px 0",fontSize:"0.8rem"},imageBox:{height:"16rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},uploadImage:{height:"3rem",width:"3rem",margin:"2rem"},typography:{textAlign:"center",cursor:"pointer"},buttonStyle:{marginBottom:16,marginTop:"2rem",width:"80%"},textFontSize:{fontSize:"0.8rem"}}})),bt=n(101),jt=n.n(bt),ht=n(102),mt=n.n(ht),xt=n(152),ft=n.n(xt),vt=n(100),gt=n.n(vt);function Ot(e){var t=e.videos,n=e.videoPlayerOptions,i=te(),o=i.handleSetWatchVideo,s=i.watchVideo,c=Object(d.g)(),l=n.classes,u=J().updateSnackBarMessage,p=n.component,b=pt(),j=Object(r.useState)(),h=Object(N.a)(j,2),m=(h[0],h[1]),x=Me(),f=(x.userDetails,x.handleGetUserDetails);var v=function(){var e=Object(O.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t);case 2:c.push("/profile/".concat(t.username));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(V.jsx)(a.a.Fragment,{children:t?t.map((function(e){var t,r,a,i;return i=e._id,((null===s||void 0===s?void 0:s._id)!==i||"Watch"!==p)&&Object(V.jsxs)(ct.a,{className:l.videoContainer,children:[Object(V.jsxs)(z.a,{display:"flex",justifyContent:"center",alignItems:"center",sx:{position:"relative",background:"black"},children:[Object(V.jsx)(z.a,{sx:{position:"absolute",width:"100%",height:"100%",cursor:"pointer",zIndex:1},onClick:function(){return function(e){if(void 0===e)return u("Waiting For Server");o(e),c.push("/watch/".concat(e.videoTitle))}(e)}}),Object(V.jsx)(st,{videoSource:e.videoSource,videoPlayerOptions:n,setVideoDuration:m})]}),n?n.displayDetails&&Object(V.jsxs)(z.a,{className:l.videoDetailsContainer,style:{width:"100%",position:"relative"},children:[Object(V.jsx)(z.a,{children:Object(V.jsx)(B.a,{variant:"h5",align:"center",children:e.videoTitle})}),Object(V.jsx)(z.a,{}),Object(V.jsx)(z.a,{className:b.textSpacing,children:Object(V.jsxs)(Ge.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(V.jsx)(B.a,{variant:"subtitle1",children:"Posted by: "})," ",Object(V.jsx)(B.a,{onClick:function(){return v({username:e.username,id:e.userId,email:"undefined"})},sx:{fontWeight:"bold",cursor:"pointer"},color:"primary",children:e.username})]})})," ",Object(V.jsx)(z.a,{className:b.textSpacing,children:Object(V.jsxs)(B.a,{variant:"subtitle1",children:["Artist: ",e.artist]})}),Object(V.jsx)(z.a,{className:b.textSpacing,children:Object(V.jsxs)(B.a,{variant:"subtitle1",children:["Category: ",e.videoCategory]})}),Object(V.jsx)(z.a,{className:b.textSpacing,children:Object(V.jsxs)(B.a,{variant:"subtitle1",children:["Duration: ",e.videoDuration]})})," ",Object(V.jsx)(z.a,{className:b.textSpacing,children:Object(V.jsxs)(B.a,{variant:"subtitle1",component:"span",children:["Date: \xa0",Object(V.jsx)(B.a,{style:{fontSize:"0.8rem"},component:"span",children:gt()(e.datePosted).format("MMMM Do YYYY")})]})}),Object(V.jsx)(z.a,{className:b.textSpacing,children:Object(V.jsxs)(Ge.a,{direction:"row",spacing:2,children:[" ",Object(V.jsxs)(z.a,{children:[" ",Object(V.jsx)(jt.a,{sx:{color:"green",marginRight:"7px"}}),null===(t=e.likes)||void 0===t?void 0:t.length]})," ",Object(V.jsxs)(z.a,{children:[Object(V.jsx)(mt.a,{sx:{color:"red",marginRight:"7px"}}),null===(r=e.dislikes)||void 0===r?void 0:r.length]})]})}),Object(V.jsx)(z.a,{className:b.textSpacing,children:Object(V.jsxs)(B.a,{variant:"subtitle1",children:[Object(V.jsx)(ft.a,{sx:{marginRight:"7px"}}),null===(a=e.views)||void 0===a?void 0:a.length]})}),Object(V.jsx)(dt,{renderedComponent:p,video:e})]}):""]},e._id)})):Object(V.jsx)(B.a,{children:"No Videos to Display"})})}var wt=Object(m.a)((function(e){return{root:{minHeight:"100vh","& .MuiInput-underline:before":{borderBottom:"1.2px solid rgba(0, 0, 0, 0.2)",background:"#F2F2F7 "}},profile:{minHeight:"90vh"},videoContainer:Object(ge.a)({display:"flex",margin:"10px",padding:"10px",backgroundColor:"#f2f2f7",borderRadius:"5px"},e.breakpoints.down("sm"),{flexDirection:"column"}),videos:{minHeight:"90vh"},videoDetailsContainer:Object(ge.a)({padding:"0 10px"},e.breakpoints.down("sm"),{display:"none"})}}));function yt(){var e=wt(),t=(W().loggedInUser,te()),n=t.allVideos,a=t.handleGetAllVideos,i=Object(De.a)(),o={width:"550",height:Object(Ve.a)(i.breakpoints.up("sm"))?"300":"200",autoPlay:!1,displayDetails:!0,component:"Home",classes:e};return Object(r.useEffect)((function(){void 0===n&&a()}),[n]),Object(V.jsx)(j.a,{container:!0,component:"div",children:Object(V.jsx)(j.a,{item:!0,lg:10,md:11,sm:10,xs:12,style:{minHeight:"100vh",padding:" 25px  10px",margin:"0 auto"},children:Object(V.jsx)(Ot,{videos:n,videoPlayerOptions:o})})})}var kt=n(87),St=n(566),Ct=n(579),It=n(588),Dt=n(578),Vt=function(e){var t,n=0;for(t=0;t<e.length;t+=1)n=e.charCodeAt(t)+((n<<5)-n);var r="#";for(t=0;t<3;t+=1){r+="00".concat((n>>8*t&255).toString(16)).substr(-2)}return r},Ut=function(e,t,n){return{sx:{bgcolor:Vt(e),width:t,height:n},children:"".concat(e[0])}},Pt=Object(m.a)((function(){return{root:{minHeight:"100vh","& .MuiInput-underline:before":{borderBottom:"1.2px solid rgba(0, 0, 0, 0.2)"}},profile:{minHeight:"90vh"},videos:{minHeight:"90vh"},videoContainer:{marginBottom:"5px "},addCommentBtn:{position:"absolute",marginTop:"-3rem",right:"0%",background:"#1976D2"}}})),Tt=function(){var e=Object(O.a)(g.a.mark((function e(t,n,r,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.post("/likes/add-like",{loggedInUsername:t,userId:n,videoId:r,userImage:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),zt=function(){var e=Object(O.a)(g.a.mark((function e(t,n,r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.post("/likes/add-dislike",{loggedInUsername:t,userId:n,videoId:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Bt=function(){var e=Object(O.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.post("/likes/remove-like",{userId:t,videoId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Et=function(){var e=Object(O.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.post("/likes/remove-dislike",{userId:t,videoId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function Nt(){Pt();var e=te(),t=e.allVideos,n=e.watchVideo,a=e.handleGetAllVideos,i=e.handleSetWatchVideo,o=W().loggedInUser,s=Object(r.useState)([]),c=Object(N.a)(s,2),l=c[0],u=c[1],d=Object(r.useState)([]),p=Object(N.a)(d,2),b=p[0],j=p[1],h=J().updateSnackBarMessage;Object(r.useEffect)((function(){u(null===n||void 0===n?void 0:n.likes),j(null===n||void 0===n?void 0:n.dislikes)}),[n]),Object(r.useEffect)((function(){t&&i(n)}),[t]);var m=function(e){var t=null===e||void 0===e?void 0:e.filter((function(e){return e.userId===(null===o||void 0===o?void 0:o.id)}));return!!(null===t||void 0===t?void 0:t.length)},x=function(){var e=Object(O.a)(g.a.mark((function e(){var t,r,i,s,c,u,d;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=32;break}if(!n){e.next=32;break}if(t=n._id,r=n.userId,i=t,e.prev=4,!m(b)){e.next=8;break}return e.next=8,f();case 8:if(!m(l)){e.next=17;break}return e.next=11,Bt(r,i);case 11:if(s=e.sent,!(null===(c=s.data)||void 0===c?void 0:c.success)){e.next=15;break}return e.abrupt("return",a());case 15:e.next=26;break;case 17:return e.next=19,Tt(o.username,r,i,o.userImage);case 19:if(u=e.sent,!(null===(d=u.data)||void 0===d?void 0:d.success)){e.next=25;break}return e.abrupt("return",a());case 25:h("something went wrong,please try again");case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(4),console.error(e.t0),h("something went wrong,please try again");case 32:case"end":return e.stop()}}),e,null,[[4,28]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(O.a)(g.a.mark((function e(){var t,r,i,s,c,u,d;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=31;break}if(!n){e.next=31;break}if(t=n._id,r=n.userId,i=t,e.prev=4,!m(l)){e.next=8;break}return e.next=8,x();case 8:if(!m(b)){e.next=17;break}return e.next=11,Et(r,i);case 11:if(s=e.sent,!(null===(c=s.data)||void 0===c?void 0:c.success)){e.next=15;break}return e.abrupt("return",a());case 15:e.next=26;break;case 17:return e.next=19,zt(o.username,r,i);case 19:if(u=e.sent,!(null===(d=u.data)||void 0===d?void 0:d.success)){e.next=25;break}return e.abrupt("return",a());case 25:h("something went wrong,please try again");case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(4),h("something went wrong,please try again");case 31:case"end":return e.stop()}}),e,null,[[4,28]])})));return function(){return e.apply(this,arguments)}}();return Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)(Ge.a,{direction:"row",spacing:1,children:[Object(V.jsxs)(Ge.a,{direction:"row",alignItems:"center",children:[Object(V.jsx)(je.a,{"aria-label":"update",onClick:x,size:"small",children:Object(V.jsx)(jt.a,{sx:{color:m(l)?"green":"#757575"}})}),Object(V.jsxs)(B.a,{children:[" ",null===l||void 0===l?void 0:l.length]})]}),Object(V.jsxs)(Ge.a,{direction:"row",alignItems:"center",children:[Object(V.jsx)(je.a,{"aria-label":"update",size:"small",onClick:f,children:Object(V.jsx)(mt.a,{sx:{color:m(b)?"red":"#757575"}})}),Object(V.jsxs)(B.a,{children:[" ",null===b||void 0===b?void 0:b.length]})]})]})})}var At=n(561),Mt=n(272),Rt=n.n(Mt),Ft=function(){var e=Object(O.a)(g.a.mark((function e(t,n,r,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.post("/comment/add-comment",{comment:t,userId:n,videoId:r,loggedInUsername:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Wt=function(){var e=Object(O.a)(g.a.mark((function e(t,n,r,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.post("/comment/edit-comment",{comment:t,userId:n,videoId:r,commentId:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Lt=function(){var e=Object(O.a)(g.a.mark((function e(t){var n,r,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,r=t.videoId,a=t.commentId,e.next=3,K.a.post("/comment/delete-comment",{userId:n,videoId:r,commentId:a});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Gt(e){var t=e.openComment,n=e.setOpenComment,a=e.isEditComment,i=e.setEditComment,o=e.comment,s=e.setComment,c=e.commentId,l=Pt(),u=te(),d=u.allVideos,p=u.watchVideo,b=u.handleGetAllVideos,j=u.handleSetWatchVideo,h=W().loggedInUser,m=J().updateSnackBarMessage;Object(r.useEffect)((function(){d&&j(p)}),[d]);var x=function(){var e=Object(O.a)(g.a.mark((function e(t){var n,r,a,i,s,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o){e.next=3;break}return e.abrupt("return");case 3:if(n=null===h||void 0===h?void 0:h.username,!p){e.next=19;break}return r=p.userId,a=p._id,i=a,e.prev=7,e.next=10,Ft(o,r,i,n);case 10:s=e.sent,(null===(c=s.data)||void 0===c?void 0:c.success)&&(b(),v()),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),console.error(e.t0),m("comment not added");case 19:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(O.a)(g.a.mark((function e(t){var n,r,a,i,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o){e.next=3;break}return e.abrupt("return");case 3:if(!p){e.next=18;break}return n=p.userId,r=p._id,a=r,e.prev=6,e.next=9,Wt(o,n,a,c);case 9:i=e.sent,(null===(s=i.data)||void 0===s?void 0:s.success)&&(b(),v()),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),console.error(e.t0),m("comment not updated");case 18:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){n(!1),s(""),i(!1)};return Object(V.jsx)(V.Fragment,{children:Object(V.jsx)(z.a,{sx:{padding:"10px 60px",borderRadius:"5px",position:"fixed",minHeight:80,width:t?"64%":"5%",bottom:0,right:"31%"},children:t?Object(V.jsx)(z.a,{sx:{background:"white",width:"100%"},children:Object(V.jsxs)("form",{onSubmit:a?f:x,style:{width:"100%"},children:[Object(V.jsx)(At.a,{"aria-label":"minimum height",id:"commentInput",minRows:2,value:o,onChange:function(e){return s(e.target.value)},placeholder:"add a comment",style:{width:"100%",background:"#f9f9f9",padding:"5px",borderRadius:"5px",resize:"none"}}),Object(V.jsxs)(Ge.a,{direction:"row",justifyContent:"flex-end",spacing:1,children:[" ",Object(V.jsx)(P.a,{size:"small",type:"submit",color:"primary",variant:"contained",children:"Comment"}),Object(V.jsx)(P.a,{type:"submit",onClick:v,size:"small",color:"primary",variant:"contained",children:"Cancel"})]})]})}):Object(V.jsxs)(z.a,{sx:{position:"relative",width:"10%",background:"green",float:"right"},children:[Object(V.jsxs)(je.a,{sx:{position:"absolute",marginTop:"-3rem",boxShadow:" 0px 0px 9px 0px rgba(0,0,0,0.75)",right:"0%",background:"#f9f9f9",color:"#1976D2","&:hover":{background:"#1976D2",color:"white"}},className:l.addCommentBtn,"aria-label":"update",onClick:function(){n(!0);var e=document.getElementById("commentInput");null!==e&&(e.focus(),e.click())},size:"large",children:[Object(V.jsx)(Rt.a,{sx:{fontSize:"50px"}})," "]}),Object(V.jsx)(B.a,{sx:{position:"absolute",marginTop:"1.5rem",right:"0%",color:"#1976D2"},children:"comment"})]})})})}var Ht=function(){var e=Object(O.a)(g.a.mark((function e(t,n,r,a,i){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.post("/comment/add-like",{loggedInUsername:t,userId:n,videoId:r,userImage:i,commentId:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),_t=function(){var e=Object(O.a)(g.a.mark((function e(t,n,r,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.post("/comment/add-dislike",{loggedInUsername:t,userId:n,videoId:r,commentId:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Yt=function(){var e=Object(O.a)(g.a.mark((function e(t,n,r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.post("/comment/remove-like",{userId:t,videoId:n,commentId:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),qt=function(){var e=Object(O.a)(g.a.mark((function e(t,n,r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.post("/comment/remove-dislike",{userId:t,videoId:n,commentId:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function Jt(e){var t,n,a,i,o=e.comment,s=(Pt(),te()),c=s.allVideos,l=s.watchVideo,u=s.handleGetAllVideos,d=s.handleSetWatchVideo,p=W().loggedInUser,b=Object(r.useState)([]),j=Object(N.a)(b,2),h=(j[0],j[1],J().updateSnackBarMessage);Object(r.useEffect)((function(){c&&d(l)}),[c]);var m=function(e){var t=null===e||void 0===e?void 0:e.filter((function(e){return e.userId===(null===p||void 0===p?void 0:p.id)}));return!!(null===t||void 0===t?void 0:t.length)},x=function(){var e=Object(O.a)(g.a.mark((function e(){var t,n,r,a,i,s,c,d;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=30;break}if(!l){e.next=30;break}if(t=l._id,n=l.userId,r=o._id,a=t,e.prev=5,!m(null===o||void 0===o?void 0:o.dislikes)){e.next=9;break}return e.next=9,f();case 9:if(!m(o.likes)){e.next=18;break}return e.next=12,Yt(n,a,r);case 12:if(i=e.sent,!(null===(s=i.data)||void 0===s?void 0:s.success)){e.next=16;break}return e.abrupt("return",u());case 16:e.next=24;break;case 18:return e.next=20,Ht(p.username,n,a,r,null===p||void 0===p?void 0:p.userImage);case 20:if(c=e.sent,!(null===(d=c.data)||void 0===d?void 0:d.success)){e.next=24;break}return e.abrupt("return",u());case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(5),console.error(e.t0),h("like not updated");case 30:case"end":return e.stop()}}),e,null,[[5,26]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(O.a)(g.a.mark((function e(){var t,n,r,a,i,s,c,d;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=30;break}if(!l){e.next=30;break}if(t=l._id,n=l.userId,r=t,a=o._id,e.prev=5,!m(o.likes)){e.next=9;break}return e.next=9,x();case 9:if(!m(o.dislikes)){e.next=18;break}return e.next=12,qt(n,r,a);case 12:if(i=e.sent,!(null===(s=i.data)||void 0===s?void 0:s.success)){e.next=16;break}return e.abrupt("return",u());case 16:e.next=24;break;case 18:return e.next=20,_t(p.username,n,r,a);case 20:if(c=e.sent,!(null===(d=c.data)||void 0===d?void 0:d.success)){e.next=24;break}return e.abrupt("return",u());case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(5),console.error(e.t0),h("dislike not updated");case 30:case"end":return e.stop()}}),e,null,[[5,26]])})));return function(){return e.apply(this,arguments)}}();return Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)(Ge.a,{direction:"row",spacing:1,children:[Object(V.jsxs)(Ge.a,{direction:"row",alignItems:"center",children:[Object(V.jsxs)(je.a,{"aria-label":"update",onClick:x,size:"small",children:[Object(V.jsx)(jt.a,{sx:{fontSize:"1.2rem",color:m(o.likes)?"green":""}})," "]})," ",Object(V.jsx)(B.a,{children:0!==(null===(t=o.likes)||void 0===t?void 0:t.length)&&(null===(n=o.likes)||void 0===n?void 0:n.length)})]}),Object(V.jsxs)(Ge.a,{direction:"row",alignItems:"center",children:[Object(V.jsx)(je.a,{"aria-label":"update",onClick:f,size:"small",children:Object(V.jsx)(mt.a,{sx:{fontSize:"1.2rem",color:m(o.dislikes)?"red":""}})}),Object(V.jsx)(B.a,{children:0!==(null===(a=o.dislikes)||void 0===a?void 0:a.length)&&(null===(i=o.dislikes)||void 0===i?void 0:i.length)})]})]})})}var $t=n(153),Kt=n.n($t);function Qt(e){var t=e.commentId,n=e.setOpenComment,a=e.setEditComment,i=e.setComment,o=e.comment,s=e.setCommentId,c=(Pt(),te()),l=c.allVideos,u=c.watchVideo,d=c.handleGetAllVideos,p=c.handleSetWatchVideo,b=J().updateSnackBarMessage;Object(r.useEffect)((function(){l&&p(u)}),[l]);var j=function(){var e=Object(O.a)(g.a.mark((function e(){var n,r,a,i,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=15;break}return n=u.userId,r=u._id,a=r,e.prev=3,e.next=6,Lt({commentId:t,userId:n,videoId:a});case 6:i=e.sent,(null===(o=i.data)||void 0===o?void 0:o.success)&&d(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0),b("Comment not deleted");case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)(Ge.a,{direction:"row",spacing:1,children:[" ",Object(V.jsxs)(je.a,{"aria-label":"update",color:"primary",onClick:function(){i(o),n(!0),a(!0),t&&s(t)},size:"small",children:[Object(V.jsx)(Kt.a,{sx:{fontSize:"1.2rem"}})," "]}),Object(V.jsxs)(je.a,{"aria-label":"update",onClick:j,size:"small",children:[Object(V.jsx)(ut.a,{sx:{fontSize:"1.2rem",color:"red"}})," "]})]})})}function Xt(e){var t,n,a=e.displayCommentBtn,i=(Pt(),te()),o=i.allVideos,s=i.watchVideo,c=i.handleSetWatchVideo,l=W().loggedInUser,u=Object(r.useState)(""),p=Object(N.a)(u,2),b=p[0],j=p[1],h=Me().handleGetUserDetails,m=Object(r.useState)(!1),x=Object(N.a)(m,2),f=x[0],v=x[1],g=Object(r.useState)(""),O=Object(N.a)(g,2),w=O[0],y=O[1],k=Object(d.g)(),S=Object(r.useState)(!1),C=Object(N.a)(S,2),I=C[0],D=C[1];Object(r.useEffect)((function(){o&&c(s)}),[o]);var U=function(){if(s){var e={username:s.username,id:s.userId,email:"undefined"};h(e),k.push("/profile/".concat(s.username))}};return Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)(z.a,{style:{minHeight:"100px",paddingTop:"20px",whiteSpace:"nowrap"},children:[Object(V.jsx)(B.a,{sx:{margin:"10px",marginLeft:{xs:"2rem",sm:"2rem",md:"9rem",lg:"9rem",xl:"9rem"}},children:"Comments"}),Object(V.jsxs)(z.a,{sx:{marginLeft:{xs:"0rem",sm:"0rem",md:"5rem",lg:"5rem",xl:"5rem"},padding:"40px 0"},children:[(null===s||void 0===s||null===(t=s.comments)||void 0===t?void 0:t.length)?null===s||void 0===s||null===(n=s.comments)||void 0===n?void 0:n.map((function(e){return Object(V.jsxs)(z.a,{children:[Object(V.jsxs)(Ge.a,{direction:"row",alignItems:"center",spacing:2,children:[Object(V.jsx)(Dt.a,Object(de.a)(Object(de.a)({style:{cursor:"pointer",border:"1px solid #1976D2"},onClick:U},Ut(e.username.toUpperCase(),45,45)),{},{src:"/image/get-image/".concat(e.userId)})),Object(V.jsx)(B.a,{style:{cursor:"pointer"},color:"primary",onClick:U,children:e.username}),Object(V.jsx)(B.a,{style:{fontSize:"0.8rem"},children:gt()(e.commentDate).format("MMMM Do YYYY")})]}),Object(V.jsxs)(Ge.a,{sx:{marginLeft:{xs:"3rem",sm:"3rem",md:"4rem",lg:"4rem",xl:"4rem"}},children:[Object(V.jsx)(ct.a,{sx:{padding:"10px",borderRadius:"5px",background:"white",minHeight:80,width:{xs:"100%",sm:"90%"},overflowWrap:"break-word",whiteSpace:"pre-wrap"},children:Object(V.jsx)(B.a,{children:e.comment})}),Object(V.jsxs)(Ge.a,{sx:{marginLeft:{xs:"2px",sm:"2px",md:"5px",lg:"5px",xl:"5px"},marginTop:"5px"},direction:"row",spacing:3,children:[Object(V.jsx)(Jt,{comment:e}),(null===l||void 0===l?void 0:l.id)===e.userId&&Object(V.jsx)(Qt,{setOpenComment:v,commentId:e._id,comment:e.comment,setEditComment:D,setComment:j,setCommentId:y})]})]})]},e._id)})):Object(V.jsx)(B.a,{align:"center",children:"No comment for this video"})," ",!a&&Object(V.jsx)(Gt,{openComment:f,isEditComment:I,setEditComment:D,comment:b,setOpenComment:v,setComment:j,commentId:w})]})]})})}var Zt=function(){var e=Object(O.a)(g.a.mark((function e(t,n,r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.post("/views/add-viewer",{loggedInUsername:t,userId:n,videoId:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function en(){var e=te(),t=e.watchVideo,n=e.handleGetAllVideos,a=e.handleSetWatchVideo,i=e.allVideos,o=W().loggedInUser,s=J().updateSnackBarMessage,c=Object(r.useState)([]),l=Object(N.a)(c,2),u=l[0],d=l[1],p=function(){var e=Object(O.a)(g.a.mark((function e(){var r,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=13;break}return e.prev=1,e.next=4,Zt(null===o||void 0===o?void 0:o.username,null===t||void 0===t?void 0:t.userId,null===t||void 0===t?void 0:t._id);case 4:r=e.sent,(null===(a=r.data)||void 0===a?void 0:a.success)&&n(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),s("viewer not added");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){i&&a(t)}),[i]),Object(r.useEffect)((function(){(null===t||void 0===t?void 0:t.views)&&t.views.filter((function(e){return e.userId===(null===o||void 0===o?void 0:o.id)})).length||p(),(null===t||void 0===t?void 0:t.views)&&d(t.views)}),[t]),Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)(Ge.a,{direction:"row",spacing:1,children:[Object(V.jsx)(B.a,{children:u.length}),Object(V.jsx)(ft.a,{}),Object(V.jsx)(B.a,{children:"views"})]})})}var tn=n(273),nn=n.n(tn);function rn(){var e=Pt(),t=Me().handleGetUserDetails,n=te(),a=n.allVideos,i=n.watchVideo,o=(n.handleGetAllVideos,n.handleSetWatchVideo,Object(r.useState)(void 0)),s=Object(N.a)(o,2),c=s[0],l=s[1],u=Object(r.useState)(void 0),p=Object(N.a)(u,2),b=(p[0],p[1]),j=Object(r.useState)(!1),h=Object(N.a)(j,2),m=h[0],x=h[1],f=Object(kt.a)(),v=(Object(St.a)(f.breakpoints.up("sm")),Object(d.g)());Object(r.useEffect)((function(){(null===i||void 0===i?void 0:i.videoSource.includes("youtube"))?l((null===i||void 0===i?void 0:i.videoSource)+"?autoplay=1"):l(null===i||void 0===i?void 0:i.videoSource),window.scrollTo(0,0)}),[i]);var w={width:"850",height:"480",autoPlay:!0,component:"Watch",classes:e},y={width:"300",height:"200",autoPlay:!1,displayDetails:!1,component:"Watch",classes:e},k=function(){var e=Object(O.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=5;break}return n={username:i.username,id:i.userId,email:"undefined"},e.next=4,t(n);case 4:v.push("/profile/".concat(i.username));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)(Ct.a,{container:!0,style:{paddingTop:"30px",position:"relative"},className:"viewed-video-container",children:[Object(V.jsx)(Ct.a,{item:!0,xs:12,sm:12,md:9,className:"viewed-video-box",sx:{paddingBottom:5,paddingLeft:"10px",paddingRight:{xs:"10px",sm:"10px",md:"0"}},children:Object(V.jsxs)(z.a,{display:"flex",flexDirection:"column",children:[Object(V.jsxs)(z.a,{display:"flex",justifyContent:"center",sx:{background:"black"},children:[Object(V.jsx)(st,{videoSource:c,videoPlayerOptions:w,setVideoDuration:b})," ",Object(V.jsxs)(z.a,{style:{paddingTop:"7rem",background:"green"},children:[" ",Object(V.jsx)(nn.a,{children:function(e){var t=e.isVisible;x(t)}})]})]}),Object(V.jsxs)(It.a,{sx:{borderBottom:"2px solid #f9f9f9",background:"white"},children:[Object(V.jsxs)(z.a,{sx:{padding:"10px 0",whiteSpace:"nowrap"},children:[Object(V.jsxs)(Ge.a,{direction:"row",alignItems:"center",children:[Object(V.jsxs)(Ge.a,{direction:"row",spacing:1,style:{flexGrow:1},alignItems:"center",children:[Object(V.jsx)(B.a,{variant:"h5",children:null===i||void 0===i?void 0:i.videoTitle})," ",(null===i||void 0===i?void 0:i.artist)&&Object(V.jsx)(B.a,{variant:"h5",children:"-"}),Object(V.jsx)(B.a,{variant:"h5",children:null===i||void 0===i?void 0:i.artist})," "]}),Object(V.jsxs)(Ge.a,{direction:"row",spacing:1,alignItems:"center",children:[" ",Object(V.jsx)(B.a,{color:"primary",sx:{cursor:"pointer"},onClick:k,variant:"h5",children:null===i||void 0===i?void 0:i.username}),Object(V.jsx)(Dt.a,Object(de.a)(Object(de.a)({style:{cursor:"pointer",border:"1px solid #1976D2"},onClick:k},Ut(i?i.username.toUpperCase():"",50,50)),{},{src:"/image/get-image/".concat(null===i||void 0===i?void 0:i.userId)}))]})]}),Object(V.jsx)(z.a,{sx:{margin:"5px auto"},children:Object(V.jsx)(B.a,{children:null===i||void 0===i?void 0:i.videoDescription})}),Object(V.jsxs)(Ge.a,{direction:"row",alignItems:"center",sx:{margin:"5px auto"},children:[Object(V.jsx)(z.a,{display:"flex",alignItems:"center",style:{flexGrow:1},children:Object(V.jsxs)(Ge.a,{direction:"row",spacing:5,alignItems:"center",children:[" ",Object(V.jsx)(Nt,{}),Object(V.jsx)(en,{})]})})," ",Object(V.jsx)(z.a,{children:Object(V.jsxs)(Ge.a,{direction:"row",spacing:5,alignItems:"center",children:[Object(V.jsx)(B.a,{style:{fontSize:"0.9rem"},children:gt()(null===i||void 0===i?void 0:i.datePosted).format("MMMM Do YYYY")}),Object(V.jsx)(B.a,{children:null===i||void 0===i?void 0:i.videoCategory})]})})]})]})," "]}),Object(V.jsx)(It.a,{sx:{padding:0},children:Object(V.jsxs)(Ct.a,{container:!0,sx:{position:"relative"},children:[Object(V.jsxs)(Ct.a,{item:!0,xs:12,sm:8,md:12,sx:{},children:[" ",Object(V.jsx)(Xt,{displayCommentBtn:m})]}),Object(V.jsxs)(Ct.a,{item:!0,xs:4,sx:{overflowY:"scroll",top:0,bottom:0,right:-17,position:"absolute",display:{sm:"block",xs:"none",md:"none"},paddingTop:"0"},children:[" ",Object(V.jsx)(Ot,{videoPlayerOptions:y,videos:a})]})]})})]})}),Object(V.jsx)(Ct.a,{item:!0,md:3,sx:{position:"relative",display:{sm:"none",xs:"none",md:"block"},overflow:"hidden"},className:"all-video-container",children:Object(V.jsx)(z.a,{sx:{overflowY:"scroll",top:0,bottom:0,left:0,right:-17,position:"absolute",padding:"10px",paddingTop:"0"},children:Object(V.jsx)(Ot,{videoPlayerOptions:y,videos:a})})})]})})}var an=n(276),on=n.n(an),sn=n(277),cn=n.n(sn),ln=function(){var e=Object(O.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("image",t),e.abrupt("return",K.a.post("/image/upload-image",n,{headers:{"Content-Type":"multipart/form-data"}}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),un=function(){var e=Object(O.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",K.a.delete("/image/delete-image"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),dn=n(275),pn=n.n(dn),bn=n(155);function jn(e){var t=e.user,n=e.isUser,a=Le(),i=Me(),o=(i.userDetails,i.handleGetUserDetails),s=Object(r.useState)(null),c=Object(N.a)(s,2),l=c[0],u=c[1],d=Object(r.useState)(void 0),p=Object(N.a)(d,2),b=p[0],j=p[1],h=Object(r.useState)(!1),m=Object(N.a)(h,2),x=m[0],f=m[1],v=Object(r.useState)(!1),w=Object(N.a)(v,2),y=(w[0],w[1]),k=J().updateSnackBarMessage,S=Object(r.useState)(!1),C=Object(N.a)(S,2),I=C[0],D=C[1],U=Object(r.useCallback)((function(e){u(e[0]),j(URL.createObjectURL(e[0]))}),[u]),T=Object(bn.a)({onDrop:U,multiple:!1,accept:"image/jpeg, image/png"}),B=T.getRootProps,E=T.getInputProps,A=T.isDragReject,M=function(){var e=Object(O.a)(g.a.mark((function e(){var n,r,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),D(!0),e.prev=2,e.next=5,ln(l);case 5:n=e.sent,(r=n.data)&&(r.success?(o({username:t.username,id:t.userId,email:"undefined"}),j(void 0),f(!1)):(null===r||void 0===r?void 0:r.error)&&k(null===r||void 0===r||null===(a=r.error)||void 0===a?void 0:a.message)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0),k("Unexpected error! Please try again");case 14:y(!1),D(!1);case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(O.a)(g.a.mark((function e(){var n,r,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),j(void 0),D(!0),e.prev=3,e.next=6,un();case 6:n=e.sent,(r=n.data)&&(r.success?(o({username:t.username,id:t.userId,email:"undefined"}),j(void 0),f(!1)):(null===r||void 0===r?void 0:r.error)&&k(null===r||void 0===r||null===(a=r.error)||void 0===a?void 0:a.message)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0),k("Unexpected error! Please try again");case 15:y(!1),D(!1);case 17:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return Object(V.jsxs)(V.Fragment,{children:[x&&Object(V.jsx)(z.a,{onClick:function(){return f(!1)},sx:{position:"fixed",width:"100%",height:"100vh",left:0,top:0}}),Object(V.jsxs)(z.a,{className:a.bottomSpace,sx:{position:"relative"},children:[Object(V.jsx)(Dt.a,Object(de.a)(Object(de.a)({},We(t.username.toUpperCase(),100,100)),{},{src:void 0===b?void 0!==(null===t||void 0===t?void 0:t.userImage)?"/image/download-image/".concat(t.userImage):"":b})),x?Object(V.jsxs)(ct.a,{sx:{position:"absolute",whiteSpace:"nowrap",display:"flex",flexDirection:"column",alignItems:"center",padding:"10px",margin:"0 auto"},children:[void 0===b?Object(V.jsxs)("div",Object(de.a)(Object(de.a)({},B()),{},{children:[Object(V.jsx)("input",Object(de.a)({},E())),A?Object(V.jsx)(z.a,{children:"Drop "}):Object(V.jsx)(P.a,{sx:{marginBottom:"10px"},startIcon:Object(V.jsx)(on.a,{}),variant:"contained",color:"info",children:"browse"})]})):Object(V.jsx)(P.a,{sx:{marginBottom:"10px"},startIcon:Object(V.jsx)(cn.a,{}),variant:"contained",color:"success",type:"submit",onClick:M,children:I?Object(V.jsx)(at.a,{style:{fontSize:0,width:"20px",height:"20px"}}):"Save"}),Object(V.jsx)(P.a,{onClick:R,startIcon:Object(V.jsx)(ut.a,{}),variant:"contained",color:"secondary",children:"Delete"})]}):n&&Object(V.jsx)(je.a,{sx:{position:"absolute",right:"10%",top:"80%",background:"green","&:hover":{background:"green"}},"aria-label":"update",onClick:function(){return f(!0)},children:Object(V.jsx)(pn.a,{sx:{color:"white"}})})]})]})}var hn=function(){var e=Object(O.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.post("/follow/add-follower",{loggedInUsername:t,userId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),mn=function(){var e=Object(O.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.post("/follow/remove-follower",{loggedInUsername:t,userId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function xn(e){var t=e.isUser,n=W().loggedInUser,a=Me(),i=a.userDetails,o=a.handleGetUserDetails,s=(te().handleGetAllVideos,Object(r.useState)(!1)),c=Object(N.a)(s,2),l=c[0],u=c[1],d=Object(r.useState)(!1),p=Object(N.a)(d,2),b=p[0],j=p[1],h=J().updateSnackBarMessage;Object(r.useEffect)((function(){n&&i&&(i.followers.filter((function(e){return e.userId===n.id})).length?j(!0):j(!1))}),[i]);var m=function(){var e=Object(O.a)(g.a.mark((function e(){var t,r,a,s,c,l,d;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!0),!i){e.next=32;break}if(t=null===n||void 0===n?void 0:n.username,r=null===i||void 0===i?void 0:i.userId,a=null===i||void 0===i?void 0:i.username,!b){e.next=20;break}return e.prev=6,e.next=9,mn(t,r);case 9:s=e.sent,(null===(c=s.data)||void 0===c?void 0:c.success)?o({username:a,id:r,email:"undefined"}):h("something went wrong,please try again"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),console.error(e.t0),h("something went wrong,please try again");case 18:e.next=32;break;case 20:return e.prev=20,e.next=23,hn(t,r);case 23:l=e.sent,(null===(d=l.data)||void 0===d?void 0:d.success)?o({username:a,id:r,email:"undefined"}):h("something went wrong,please try again"),e.next=32;break;case 28:e.prev=28,e.t1=e.catch(20),console.error(e.t1),h("something went wrong,please try again");case 32:u(!1);case 33:case"end":return e.stop()}}),e,null,[[6,14],[20,28]])})));return function(){return e.apply(this,arguments)}}();return Object(V.jsx)(V.Fragment,{children:Object(V.jsx)(z.a,{style:{marginBottom:30},children:!t&&Object(V.jsx)(P.a,{onClick:m,disabled:l,style:{color:"white"},color:"secondary",variant:"contained",children:b?"unfollow":"follow"})})})}var fn=function(){var e=Object(O.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.post("/about/update-about",{aboutUser:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function vn(e){var t=e.isUser,n=(W().loggedInUser,Me()),a=n.userDetails,i=n.handleGetUserDetails,o=Le(),s=Object(r.useState)(!1),c=Object(N.a)(s,2),l=c[0],u=c[1],d=Object(r.useState)(!1),p=Object(N.a)(d,2),b=(p[0],p[1],Object(r.useState)(null===a||void 0===a?void 0:a.aboutUser)),j=Object(N.a)(b,2),h=j[0],m=j[1],x=Object(r.useState)(!0),f=Object(N.a)(x,2),v=f[0],w=f[1],y=J().updateSnackBarMessage;Object(r.useEffect)((function(){a&&m(null===a||void 0===a?void 0:a.aboutUser)}),[a]);var k=function(){var e=Object(O.a)(g.a.mark((function e(){var t,n,r,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!0),!a){e.next=22;break}return t=null===a||void 0===a?void 0:a.userId,n=null===a||void 0===a?void 0:a.username,e.prev=4,e.next=7,fn(h);case 7:if(r=e.sent,!(null===(o=r.data)||void 0===o?void 0:o.success)){e.next=14;break}return e.next=12,i({username:n,id:t,email:"undefined"});case 12:e.next=15;break;case 14:y("something went wrong,please try again");case 15:w(!0),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),console.error(e.t0),y("something went wrong,please try again");case 22:u(!1);case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(){return e.apply(this,arguments)}}();return Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)(z.a,{className:o.bottomSpace,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly",style:{width:"100%"},children:[Object(V.jsx)(B.a,{style:{margin:"5px"},variant:"h6",children:"About"}),Object(V.jsxs)(z.a,{style:{width:"90%",position:"relative"},children:[v&&t&&Object(V.jsx)(je.a,{sx:{position:"absolute",top:"-13%",right:"0%"},"aria-label":"update",color:"primary",onClick:function(){return w(!1)},children:Object(V.jsx)(Kt.a,{sx:{color:"white"}})}),v?Object(V.jsx)(z.a,{style:{width:"100%",minHeight:150,borderRadius:"5px",padding:" 10px",overflowWrap:"break-word"},children:h?Object(V.jsx)(B.a,{align:"center",children:h}):t&&Object(V.jsx)(B.a,{align:"center",variant:"subtitle1",children:"write something about yourself"})}):Object(V.jsxs)(z.a,{style:{width:"100%"},children:[Object(V.jsx)(At.a,{"aria-label":"minimum height",onChange:function(e){return m(e.target.value.slice(0,100))},value:h,minRows:4,style:{width:"100%",borderRadius:"5px",resize:"none"}}),Object(V.jsxs)(Ge.a,{direction:"row",justifyContent:"center",spacing:2,sx:{padding:"15px 10px"},children:[Object(V.jsx)(P.a,{disabled:l,style:{width:"87px"},onClick:k,variant:"contained",children:l?Object(V.jsx)(at.a,{style:{fontSize:0,width:"20px",height:"20px"}}):"save"}),Object(V.jsx)(P.a,{onClick:function(){w(!0),m(null===a||void 0===a?void 0:a.aboutUser)},color:"primary",variant:"contained",children:"cancel"})]})]})]})]})})}function gn(){var e=Le(),t=te().allVideos,n=W().loggedInUser,a=Me(),i=a.userDetails,o=a.handleGetUserDetails,s=Object(r.useState)(!1),c=Object(N.a)(s,2),l=c[0],u=c[1],d=Object(r.useState)(!1),p=Object(N.a)(d,2),b=p[0],j=p[1],h=Object(r.useState)({username:"",userId:"",email:"",aboutUser:"",views:[],followers:[],userImage:"",videos:[]}),m=Object(N.a)(h,2),x=m[0],f=m[1],v={width:"500",height:"280",autoPlay:!1,displayDetails:!0,component:"Profile",classes:e};return Object(r.useEffect)((function(){n&&i&&(f(i),n.id===i.userId?j(!0):j(!1))}),[n,i]),Object(r.useEffect)((function(){t&&i&&o({username:null===i||void 0===i?void 0:i.username,id:null===i||void 0===i?void 0:i.userId,email:"undefined"}),(null===i||void 0===i?void 0:i.videos.length)&&u(!0)}),[t]),Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)(Ct.a,{container:!0,sx:{height:{md:"90vh",xs:"100vh",sm:"100vh"},overflow:{md:"hidden",xs:"scroll",sm:"scroll"}},children:[Object(V.jsx)(Ct.a,{item:!0,className:e.profile,sx:{position:"relative",paddingTop:3},bgcolor:"primary.main",xs:12,sm:12,md:4,children:Object(V.jsxs)(z.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(V.jsx)(jn,{isUser:b,user:x}),Object(V.jsx)(z.a,{className:e.bottomSpace,children:Object(V.jsx)(B.a,{variant:"h5",children:x.username})}),Object(V.jsxs)(z.a,{sx:{marginBottom:"20px",width:"100%"},display:"flex",justifyContent:"space-evenly",children:[Object(V.jsxs)(B.a,{variant:"subtitle1",children:["Followers: \xa0 ",null===i||void 0===i?void 0:i.followers.length]})," ",Object(V.jsxs)(B.a,{variant:"subtitle1",children:["Posts: \xa0",null===i||void 0===i?void 0:i.videos.length]})," ",Object(V.jsxs)(B.a,{variant:"subtitle1",children:["Views: \xa0",null===i||void 0===i?void 0:i.views.length]})]}),Object(V.jsx)(xn,{isUser:b}),Object(V.jsx)(vn,{isUser:b}),Object(V.jsx)(z.a,{children:Object(V.jsxs)(B.a,{variant:"subtitle1",align:"center",children:["email: ",x.email]})})]})}),Object(V.jsx)(Ct.a,{item:!0,className:e.videos,xs:12,sm:12,md:8,sx:{position:"relative"},children:Object(V.jsx)(z.a,{sx:{paddingTop:5,padding:{xs:"1rem",sm:"1rem"},overflowY:"scroll",top:0,bottom:0,left:0,right:-17,position:{md:"absolute",xs:"relative",sm:"relative"}},children:l?Object(V.jsx)(Ot,{videos:null===i||void 0===i?void 0:i.videos,videoPlayerOptions:v}):Object(V.jsx)(z.a,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:Object(V.jsx)(B.a,{children:"This account has no videos "})})})})]})})}n(485);var On=Object(m.a)({dropBoxContainer:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:"22rem",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingTop:"2rem"},dropBox:{backgroundColor:"#fff",width:"80%",boxShadow:"24",padding:4},imageBox:{height:"16rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",border:"2px dashed #3a8dff"},imageBoxAccept:{height:"16rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",border:"2px dashed green"},imageBoxReject:{height:"16rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",border:"2px dashed red"},uploadImage:{height:"3rem",width:"3rem",margin:"2rem"},typographyBox:{display:"flex",flexDirection:"column",justifyContent:"center"},typography:{textAlign:"center",cursor:"pointer"},typographySpan:{color:"#3a8dff"}}),wn=n.p+"static/media/upload.bbb5d070.png",yn=function(e){var t=e.handleChange,n=Object(r.useCallback)((function(e){t("videoFile",void 0,e[0])}),[t]),a=Object(bn.a)({onDrop:n,multiple:!1,accept:"video/mp4, video/ogg"}),i=a.getRootProps,o=a.getInputProps,s=a.isDragAccept,c=a.isDragReject,l=On();return Object(V.jsxs)(ct.a,{sx:{width:{xs:300,sm:400,md:500},height:{xs:"17rem",sm:"22rem",md:"22rem"}},className:l.dropBoxContainer,children:[Object(V.jsxs)(b.a,Object(de.a)(Object(de.a)({className:l.dropBox},i()),{},{children:[Object(V.jsx)("input",Object(de.a)({},o())),Object(V.jsxs)(Ct.a,{className:s?l.imageBoxAccept:c?l.imageBoxReject:l.imageBox,sx:{height:{xs:"12rem",sm:"16rem",md:"16rem",display:"flex",flexDirection:"column"}},children:[Object(V.jsx)("img",{loading:"lazy",className:l.uploadImage,src:wn,alt:""}),c?Object(V.jsx)(B.a,{children:"Sorry, This app only supports Videos or MP4 files"}):Object(V.jsxs)(b.a,{className:l.typographyBox,children:[Object(V.jsxs)(B.a,{className:l.typography,children:["drop your Video, ",Object(V.jsx)("span",{className:l.typographySpan,children:"browse"})]}),Object(V.jsx)(B.a,{className:l.typography,children:"Only ogg or MP4 files supported"})]})]})]})),Object(V.jsx)(k.a,{style:{width:"80%"},name:"videoSource",label:"You can paste the video url here",onChange:function(e){var n=e.target,r=n.name,a=n.value;t(r,a,null)},variant:"standard"})]})},kn=n(567);function Sn(e){var t=e.handleSubmit,n=e.setCategory,a=e.setArtist,i=e.setDescription,o=e.videoTitle,s=e.setVideoTitle,c=e.isSubmitting,l=e.uploadProgress,u=e.uploadSuccess,d=e.category,p=Object(r.useState)("primary"),b=Object(N.a)(p,2),j=(b[0],b[1]);Object(r.useEffect)((function(){if(void 0===u)return j("primary");j(u?"primary":"secondary")}),[u]);return Object(V.jsx)(z.a,{sx:{padding:"2rem",width:{xs:"95%",sm:"80%",md:"80%",lg:"80%"},margin:"0 auto"},children:Object(V.jsxs)("form",{onSubmit:t,children:[Object(V.jsx)(z.a,{style:{margin:"20px 0"},children:Object(V.jsx)(k.a,{id:"outlined-basic",onChange:function(e){return s(e.target.value)},label:"Title",fullWidth:!0,name:"title",value:o,variant:"outlined",size:"small",required:!0})}),Object(V.jsxs)(z.a,{style:{margin:"20px 0"},children:[Object(V.jsx)(k.a,{id:"outlined-select-currency",size:"small",fullWidth:!0,variant:"outlined",select:!0,label:"Select video Category",value:d,onChange:function(e){return n(e.target.value)},required:!0,children:[{value:"Music Video",label:"Music Video"},{value:"Music Aduio",label:"Music Aduio"},{value:"Movie",label:"Movie"},{value:"Skit",label:"Skit"}].map((function(e){return Object(V.jsx)(kn.a,{value:e.value,children:e.label},e.value)}))})," "]}),Object(V.jsx)(z.a,{style:{margin:"20px 0"},children:Object(V.jsx)(k.a,{size:"small",id:"outlined-basic",onChange:function(e){return a(e.target.value)},label:"Artist",fullWidth:!0,name:"Artist",variant:"outlined",required:!0})}),Object(V.jsx)(z.a,{style:{margin:"20px 0"},children:Object(V.jsx)(k.a,{size:"small",id:"outlined-basic",onChange:function(e){return i(e.target.value)},label:"Description",fullWidth:!0,name:"description",variant:"outlined",required:!0})}),Object(V.jsx)(z.a,{textAlign:"center",children:Object(V.jsxs)(y.a,{type:"submit",size:"large",variant:"contained",color:"primary",children:[c?u?"Upload Successful":Object(V.jsx)(D.a,{style:{color:"white"}}):void 0===u?"Upload Video":!u&&"Upload Failed",c&&"".concat(l,"%")]})})]})})}function Cn(e){var t=e.handleSubmit,n=e.setFile,a=e.setUploadSuccess,i=e.setSubmitting,o=(e.setFileName,e.videoSource),s=e.setVideoSource,c=e.setVideoTitle,l=e.isSubmitting,u=e.uploadProgress,d=e.videoTitle,p=e.uploadSuccess,b=e.setVideoDuration,j=e.setArtist,h=e.setDescription,m=e.setCategory,x=e.category,f=Object(r.useState)(void 0),v=Object(N.a)(f,2),g=v[0],O=v[1],w=Object(kt.a)(),y=Object(St.a)(w.breakpoints.up("sm")),k={width:y?"560":"480",height:y?"315":"280",autoPlay:!0,component:"UploadVideoForm",classes:null},S=function(e){if(+e.includes("embed")>0)return s(e),O(e);var t="youtu.be/",n=e.search(t)+t.length,r=e.substr(n,11),a="https://www.youtube.com/embed/".concat(r);return s(a),O(a)};return Object(V.jsx)(z.a,{style:{paddingTop:"3rem"},children:o.length?Object(V.jsxs)(ct.a,{sx:{minHeight:"80vh",width:{sm:"100%",md:"75%",lg:"60%"},margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(V.jsxs)(z.a,{display:"flex",justifyContent:"center",style:{paddingTop:"3rem",position:"relative"},children:[Object(V.jsxs)(je.a,{style:{position:"absolute",zIndex:1,right:"2%",top:"17%",cursor:"pointer"},"aria-label":"update",onClick:function(){c(""),s(""),i(!1),a(void 0)},children:[" ",Object(V.jsx)(ut.a,{sx:{color:"red"}})]}),Object(V.jsx)(st,{videoSource:g,setVideoDuration:b,videoPlayerOptions:k})]}),Object(V.jsx)(Sn,{handleSubmit:t,setVideoTitle:c,isSubmitting:l,uploadProgress:u,videoTitle:d,uploadSuccess:p,setArtist:j,setDescription:h,setCategory:m,category:x})]}):Object(V.jsx)(yn,{handleChange:function(e,t,r){switch(e){case"videoSource":t&&((null===t||void 0===t?void 0:t.includes("youtu"))?S(t):(s(t),O(t)));break;case"videoFile":if(r){var a=r.type.slice(6);c(r.name.replace(".".concat(a),"")),s("/stream_videos/".concat(Date.now())),O(URL.createObjectURL(r)),n(r)}}}})})}var In=function(){var e=Object(O.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",K.a.post("/video/video-details",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Dn(){var e=W().loggedInUser,t=Object(r.useState)(null),n=Object(N.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)(""),s=Object(N.a)(o,2),c=s[0],l=s[1],u=Object(r.useState)("Choose a file"),d=Object(N.a)(u,2),p=(d[0],d[1]),j=Object(r.useState)(void 0),h=Object(N.a)(j,2),m=h[0],x=h[1],f=Object(r.useState)(0),v=Object(N.a)(f,2),w=v[0],y=v[1],k=Object(r.useState)(""),S=Object(N.a)(k,2),C=S[0],I=S[1],D=Object(r.useState)(""),U=Object(N.a)(D,2),P=U[0],T=U[1],z=Object(r.useState)(!1),B=Object(N.a)(z,2),E=B[0],A=B[1],M=te().handleGetAllVideos,R=J().updateSnackBarMessage,F=Object(r.useState)(""),L=Object(N.a)(F,2),G=L[0],H=L[1],_=Object(r.useState)(""),Y=Object(N.a)(_,2),q=Y[0],$=Y[1],Q=Object(r.useState)(""),X=Object(N.a)(Q,2),Z=X[0],ee=X[1],ne=function(){var t=Object(O.a)(g.a.mark((function t(n){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),P&&q&&Z){t.next=3;break}return t.abrupt("return");case 3:if(A(!0),!e){t.next=13;break}if(r={username:null===e||void 0===e?void 0:e.username,userId:null===e||void 0===e?void 0:e.id,userImage:null===e||void 0===e?void 0:e.userImage,videoTitle:P,videoId:"",videoSource:C,videoDescription:q,artist:G,videoCategory:Z,videoDuration:c,_id:""},!a){t.next=11;break}return t.next=9,re(r);case 9:t.next=13;break;case 11:return t.next=13,ae(r);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),re=function(){var e=Object(O.a)(g.a.mark((function e(t){var n,r,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("video",a),e.prev=2,e.next=5,K.a.post("/video/upload-video",n,{headers:{"content-Type":"multipart/form-data"},onUploadProgress:function(e){y(Math.round(100*e.loaded/e.total))}});case 5:if(r=e.sent,!(i=r.data)){e.next=13;break}return t.videoSource=i.url,e.next=11,ae(t);case 11:e.next=15;break;case 13:R("video not uploaded"),A(!1);case 15:e.next=22;break;case 17:e.prev=17,e.t0=e.catch(2),console.error(e.t0),R("video not uploaded"),A(!1);case 22:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(O.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,In(t);case 3:n=e.sent,(null===(r=n.data)||void 0===r?void 0:r.success)?(x(!0),M()):(R("video not uploaded"),A(!1),x(!1)),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(0),x(!1),A(!1),console.error(e.t0),R("video not uploaded");case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(V.jsx)(b.a,{style:{minHeight:"90vh"},children:Object(V.jsx)(Cn,{handleSubmit:ne,videoSource:C,setFile:i,setFileName:p,setVideoSource:I,setVideoTitle:T,videoTitle:P,isSubmitting:E,uploadProgress:w,uploadSuccess:m,setVideoDuration:l,setArtist:H,setDescription:$,setCategory:ee,category:Z,setSubmitting:A,setUploadSuccess:x})})}var Vn=function(){return Object(V.jsx)(s.a,{theme:l,children:Object(V.jsx)(u.a,{children:Object(V.jsx)(q,{children:Object(V.jsx)(F,{children:Object(V.jsx)(ue,{children:Object(V.jsx)(ee,{children:Object(V.jsxs)(Ae,{children:[Object(V.jsx)(rt,{}),Object(V.jsx)(d.d,{children:Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(d.b,{exact:!0,path:"/login",component:ne}),Object(V.jsx)(d.b,{exact:!0,path:"/signup",component:se}),Object(V.jsx)(d.b,{exact:!0,path:"/upload-video",component:Dn}),Object(V.jsx)(d.b,{exact:!0,path:"/home",component:yt}),Object(V.jsx)(d.b,{exact:!0,path:"/watch/:title",component:rn}),Object(V.jsx)(d.b,{exact:!0,path:"/profile/:username",component:gn}),Object(V.jsx)(d.b,{path:"/",children:Object(V.jsx)(d.a,{to:"/home"})}),Object(V.jsx)(d.b,{path:"*",children:Object(V.jsx)(d.a,{to:"/login"})})]})})]})})})})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(V.jsx)(Vn,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[486,1,2]]]);
//# sourceMappingURL=main.1cbe8a51.chunk.js.map