(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{299:function(e,t,n){},484:function(e,t,n){},485:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(25),o=n.n(i),c=(n(299),n(569)),s=n(274),l=Object(s.a)({typography:{fontFamily:'"Open Sans", "sans-serif", "Roboto"',fontSize:12,button:{textTransform:"none",fontWeight:700}},palette:{primary:{main:"#3A8DFF"},secondary:{main:"#ef3f40"},success:{main:"#199401"},warning:{main:"#F40F11"}},shape:{borderRadius:5}}),u=n(86),d=n(24),p=n(572),b=n(556),j=n(156),h=n(549),m=n.p+"static/media/backgroundImg.b802b849.jpg",x=Object(h.a)((function(){return{root:{height:"100vh",position:"fixed",top:0,backgroundColor:"rgb(0, 0, 0, 0.8)",backgroundRepeat:" no-repeat",backgroundSize:"cover",backgroundImage:"url(".concat(m,")"),backgroundAttachment:"fixed",backgroundPosition:"center",padding:"20px"},authWrapper:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexDirection:"column",minHeight:"100vh",width:"100%",paddingTop:23},welcome:{fontSize:26,paddingBottom:20,color:"#000000",fontWeight:700,fontFamily:"'Open Sans'"}}})),f=n(4),v=n.n(f),g=n(7),O=function(){var e=Object(g.a)(v.a.mark((function e(t,n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n}),credentials:"include"},e.next=3,fetch("/auth/login",r).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=n(553),y=n(570),k=n(151),S=n(73),I=Object(h.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},label:{fontSize:19,color:"white",paddingLeft:"5px"},inputs:{marginTop:".8rem",height:"2rem",padding:"5px",borderRadius:"5px"},forgot:{paddingRight:10,color:"#3a8dff",marginLeft:"10px"},submit:{margin:e.spacing(3,2,2),padding:10,width:160,height:56,borderRadius:e.shape.borderRadius,marginTop:49,fontSize:16,backgroundColor:"#3a8dff",fontWeight:"bold"}}})),C=n(554),D=n(1);function V(e){var t=e.handleSubmit,n=I();return Object(D.jsx)(k.a,{initialValues:{email:"",password:""},validationSchema:S.a().shape({email:S.b().required("Email is required").email("Email is not valid"),password:S.b().required("Password is required").max(100,"Password is too long").min(6,"Password too short")}),onSubmit:t,children:function(e){var t=e.handleSubmit,r=e.handleChange,a=e.values,i=e.touched,o=e.errors,c=e.isSubmitting;return Object(D.jsxs)("form",{onSubmit:t,style:{color:"white"},className:n.form,noValidate:!0,children:[Object(D.jsx)(y.a,{id:"email",label:Object(D.jsx)(j.a,{className:n.label,children:"E-mail address"}),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{classes:{input:n.inputs}},name:"email",autoComplete:"email",autoFocus:!0,helperText:i.email?o.email:"",error:i.email&&Boolean(o.email),value:a.email,onChange:r}),Object(D.jsx)(y.a,{id:"password",label:Object(D.jsx)(j.a,{className:n.label,children:"Password"}),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{classes:{input:n.inputs}},type:"password",autoComplete:"current-password",helperText:i.password?o.password:"",error:i.password&&Boolean(o.password),value:a.password,onChange:r}),Object(D.jsx)(p.a,{textAlign:"center",children:Object(D.jsx)(w.a,{type:"submit",size:"large",variant:"contained",color:"primary",className:n.submit,children:c?Object(D.jsx)(C.a,{style:{color:"white"}}):"Login"})}),Object(D.jsx)("div",{style:{height:95}})]})}})}var P=Object(h.a)((function(e){return{authHeader:{alignSelf:"flex-end",justifyContent:"flex-end",alignItems:"center",display:"flex",flexWrap:"wrap"},accAside:{fontSize:14,color:"#b0b0b0",fontWeight:400,textAlign:"center",marginRight:35,whiteSpace:"nowrap",display:"flex",alignItems:"center",padding:"1rem 0"},link:{textDecoration:"none"},accBtn:{width:170,height:54,borderRadius:e.shape.borderRadius,filter:"drop-shadow(0px 2px 6px rgba(74,106,149,0.2))",backgroundColor:"#ffffff",color:"#3a8dff",boxShadow:"none",marginRight:35}}})),U=function(e){var t=e.linkTo,n=e.asideText,r=e.btnText,a=P();return Object(D.jsxs)(p.a,{p:1,className:a.authHeader,children:[Object(D.jsx)(j.a,{className:a.accAside,children:n}),Object(D.jsx)(u.b,{to:t,className:a.link,children:Object(D.jsx)(w.a,{color:"inherit",className:a.accBtn,variant:"contained",children:r})})]})},z=n(5),B=function(){var e=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",credentials:"include"},e.next=3,fetch("/auth/user",t).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",credentials:"include"},e.next=3,fetch("/auth/logout",t).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=Object(r.createContext)({loggedInUser:void 0,updateLoginContext:function(){return null},logout:function(){return null}}),N=function(e){var t=e.children,n=Object(r.useState)(),a=Object(z.a)(n,2),i=a[0],o=a[1],c=Object(d.g)(),s=Object(r.useCallback)((function(e){o(e.user),c.push("/home")}),[c]),l=Object(r.useCallback)(Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T().then((function(){c.push("/login"),o(null)})).catch((function(e){return console.error(e)}));case 2:case"end":return e.stop()}}),e)}))),[c]);return Object(r.useEffect)((function(){(function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B().then((function(e){e.success?(s(e.success),c.push("/home")):(o(null),c.push("/login"))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s,c]),Object(D.jsx)(E.Provider,{value:{loggedInUser:i,updateLoginContext:s,logout:l},children:t})};function A(){return Object(r.useContext)(E)}var M=n(577),R=n(555),F=n(261),W=n.n(F),L=Object(r.createContext)({updateSnackBarMessage:function(){return null}}),G=function(e){var t=e.children,n=Object(r.useState)(null),a=Object(z.a)(n,2),i=a[0],o=a[1],c=Object(r.useState)(!1),s=Object(z.a)(c,2),l=s[0],u=s[1],d=Object(r.useCallback)((function(e){o(e),u(!0)}),[]),p=Object(r.useCallback)((function(){u(!1)}),[]),b=Object(r.useCallback)((function(e,t){"clickaway"!==t&&u(!1)}),[]);return Object(D.jsxs)(L.Provider,{value:{updateSnackBarMessage:d},children:[t,Object(D.jsx)(M.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:l,autoHideDuration:6e3,onClose:b,message:i,action:Object(D.jsx)(R.a,{size:"small","aria-label":"close",color:"inherit",onClick:p,children:Object(D.jsx)(W.a,{fontSize:"small"})})})]})};function H(){return Object(r.useContext)(L)}var _=n(23),Y=n.n(_),q=function(){var e=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.a.post("/videos/all-videos");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("/videos/delete-video",{videoId:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=Object(r.createContext)({handleGetAllVideos:function(){return null},handleSetWatchVideo:function(){return null},allVideos:void 0,watchVideo:void 0}),K=function(e){var t=e.children,n=Object(r.useState)(void 0),a=Object(z.a)(n,2),i=a[0],o=a[1],c=Object(r.useState)(void 0),s=Object(z.a)(c,2),l=s[0],u=s[1],d=H().updateSnackBarMessage,p=function(){var e=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q();case 3:(t=e.sent)&&o(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),d("videos is not updated");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){p()}),[]),Object(D.jsx)($.Provider,{value:{allVideos:i,watchVideo:l,handleGetAllVideos:p,handleSetWatchVideo:function(e){if(i){var t=i.filter((function(t){return t._id===(null===e||void 0===e?void 0:e._id)}));u(t[0])}}},children:t})};function Q(){return Object(r.useContext)($)}function X(){var e=x(),t=A().updateLoginContext,n=H().updateSnackBarMessage,a=Q(),i=a.allVideos,o=a.handleGetAllVideos;Object(r.useEffect)((function(){void 0===i&&o()}),[i]);return Object(D.jsx)(b.a,{container:!0,component:"main",className:e.root,children:Object(D.jsxs)(p.a,{className:e.authWrapper,style:{color:"white"},children:[Object(D.jsx)(U,{linkTo:"/signup",asideText:"Don't have an account?",btnText:"Create account"}),Object(D.jsxs)(p.a,{width:"100%",maxWidth:450,p:3,alignSelf:"center",children:[Object(D.jsx)(b.a,{container:!0,children:Object(D.jsx)(b.a,{item:!0,xs:!0,children:Object(D.jsx)(j.a,{className:e.welcome,align:"center",style:{color:"white"},component:"h1",variant:"h5",children:"Welcome to VStreamer"})})}),Object(D.jsx)(V,{handleSubmit:function(e,r){var a=e.email,i=e.password,o=r.setSubmitting;O(a,i).then((function(e){e.error?(o(!1),n(e.error.message)):e.success?t(e.success):(console.error({data:e}),o(!1),n("An unexpected error occurred. Please try again"))}))}})]}),Object(D.jsx)(p.a,{p:1,alignSelf:"center"})]})})}var Z=Object(h.a)((function(){return{root:{height:"100vh",position:"fixed",top:0,backgroundColor:"rgb(0, 0, 0, 0.8)",backgroundRepeat:" no-repeat",backgroundSize:"cover",backgroundImage:"url(".concat(m,")"),backgroundAttachment:"fixed",backgroundPosition:"center",padding:"20px",color:"white"},authWrapper:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexDirection:"column",minHeight:"100vh",width:"100%",paddingTop:23},welcome:{fontSize:26,paddingBottom:20,color:"#ffffff",fontWeight:700,fontFamily:"'Open Sans'"}}})),ee=function(){var e=Object(g.a)(v.a.mark((function e(t,n,r){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,email:n,password:r}),credentials:"include"},e.next=3,fetch("/auth/register",a).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),te=Object(h.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},label:{fontSize:19,color:"white",paddingLeft:"5px"},inputs:{marginTop:".8rem",height:"2rem",padding:"5px",borderRadius:"5px"},forgot:{paddingRight:10,color:"#3a8dff"},submit:{margin:e.spacing(3,2,2),padding:10,width:160,height:56,borderRadius:e.shape.borderRadius,marginTop:49,fontSize:16,backgroundColor:"#3a8dff",fontWeight:"bold"}}})),ne=function(e){var t=e.handleSubmit,n=te();return Object(D.jsx)(k.a,{initialValues:{email:"",password:"",username:""},validationSchema:S.a().shape({username:S.b().required("Username is required").max(40,"Username is too long"),email:S.b().required("Email is required").email("Email is not valid"),password:S.b().required("Password is required").max(100,"Password is too long").min(6,"Password too short")}),onSubmit:t,children:function(e){var t=e.handleSubmit,r=e.handleChange,a=e.values,i=e.touched,o=e.errors,c=e.isSubmitting;return Object(D.jsxs)("form",{onSubmit:t,className:n.form,noValidate:!0,children:[Object(D.jsx)(y.a,{id:"username",label:Object(D.jsx)(j.a,{className:n.label,children:"Username"}),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{classes:{input:n.inputs}},name:"username",autoComplete:"username",autoFocus:!0,helperText:i.username?o.username:"",error:i.username&&Boolean(o.username),value:a.username,onChange:r}),Object(D.jsx)(y.a,{id:"email",label:Object(D.jsx)(j.a,{className:n.label,children:"E-mail address"}),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{classes:{input:n.inputs}},name:"email",autoComplete:"email",helperText:i.email?o.email:"",error:i.email&&Boolean(o.email),value:a.email,onChange:r}),Object(D.jsx)(y.a,{id:"password",label:Object(D.jsx)(j.a,{className:n.label,children:"Password"}),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{classes:{input:n.inputs}},type:"password",autoComplete:"current-password",helperText:i.password?o.password:"",error:i.password&&Boolean(o.password),value:a.password,onChange:r}),Object(D.jsx)(p.a,{textAlign:"center",children:Object(D.jsx)(w.a,{type:"submit",size:"large",variant:"contained",color:"primary",className:n.submit,children:c?Object(D.jsx)(C.a,{style:{color:"white"}}):"Create"})})]})}})};function re(){var e=Z(),t=A().updateLoginContext,n=H().updateSnackBarMessage;return Object(D.jsx)(b.a,{container:!0,component:"main",className:e.root,children:Object(D.jsxs)(p.a,{className:e.authWrapper,children:[Object(D.jsx)(U,{linkTo:"/login",asideText:"Already have an account?",btnText:"Login"}),Object(D.jsxs)(p.a,{width:"100%",maxWidth:450,p:3,alignSelf:"center",children:[Object(D.jsx)(b.a,{container:!0,children:Object(D.jsx)(b.a,{item:!0,xs:!0,children:Object(D.jsx)(j.a,{className:e.welcome,align:"center",component:"h1",variant:"h5",children:"Create an account"})})}),Object(D.jsx)(ne,{handleSubmit:function(e,r){var a=e.username,i=e.email,o=e.password,c=r.setSubmitting;ee(a,i,o).then((function(e){e.error?(console.error({error:e.error.message}),c(!1),n(e.error.message)):e.success?t(e.success):(console.error({data:e}),c(!1),n("An unexpected error occurred. Please try again"))}))}})]}),Object(D.jsx)(p.a,{p:1,alignSelf:"center"})]})})}var ae=n(262),ie=Object(r.createContext)({socket:void 0,initSocket:function(){return null}}),oe=function(e){var t=e.children,n=Object(r.useState)(void 0),a=Object(z.a)(n,2),i=a[0],o=a[1],c=Object(r.useCallback)((function(){console.log("trying to connect"),o(Object(ae.io)("/",{withCredentials:!0}))}),[]);return Object(D.jsx)(ie.Provider,{value:{socket:i,initSocket:c},children:t})};var ce=n(36),se=n(584),le=n(581),ue=n(585),de=n(583),pe=n(586),be=n(266),je=n.n(be),he=n.p+"static/media/logo.240aab52.svg",me=n(263),xe=n.n(me),fe=n(12),ve=n(574),ge=n(14),Oe=n(558),we=Object(ge.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),ye=Object(ge.a)("div")((function(e){var t,n=e.theme;return t={position:"relative",borderRadius:n.shape.borderRadius,backgroundColor:Object(Oe.a)(n.palette.common.white,.15),"&:hover":{backgroundColor:Object(Oe.a)(n.palette.common.white,.25)},marginRight:n.spacing(2),marginLeft:0,width:"60%"},Object(fe.a)(t,n.breakpoints.up(1200),{marginLeft:n.spacing(3),width:"60%"}),Object(fe.a)(t,n.breakpoints.down(1200),{marginLeft:n.spacing(3),width:"50%"}),Object(fe.a)(t,n.breakpoints.down(1044),{marginLeft:n.spacing(3),width:"40%"}),Object(fe.a)(t,n.breakpoints.down(900),{marginLeft:n.spacing(3),width:"60%"}),Object(fe.a)(t,n.breakpoints.down(500),{marginLeft:n.spacing(2),width:"100%"}),t})),ke=Object(ge.a)(ve.a)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":{padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width")}}})),Se=Object(h.a)((function(e){return{search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:"#E9EEF9",marginLeft:0,height:"50px",lineHeight:"18px",width:"calc(".concat(240," - 2rem)")},searchRoot:{color:"inherit",width:"100%",height:"100%"},searchInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),width:"100%",fontWeight:600},searchIcon:{height:"100%",position:"absolute",pointerEvents:"none",marginLeft:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},drawer:{position:"absolute",width:"100%",transition:"height 1s",bottom:"0%",borderEndEndRadius:"5px",borderBottomLeftRadius:"5px",overFlow:"hidden"},drawerBackDrop:{position:"fixed",height:"100vh",width:"100%",bgColor:"black",left:0,top:0,zIndex:1,cursor:" pointer"}}})),Ie=n(98),Ce=n(564),De=n(551),Ve=n(552),Pe=n(493),Ue=n(563);var ze=function(e){var t=e.searchedVideo,n=e.setSearchedVideo,a=e.toggleDrawer,i=Q(),o=i.allVideos,c=i.handleSetWatchVideo,s=Object(r.useState)([]),l=Object(z.a)(s,2),u=l[0],p=l[1],b=Object(d.g)();return Object(r.useEffect)((function(){t&&function(){if(o){var e=o.filter((function(e){var n=t.replace(/\s+/g,"").toLowerCase();return e.videoTitle.toLowerCase().includes(n)}));p(e)}}()}),[t]),Object(D.jsx)(Ve.a,{children:u.length?u.map((function(e){return Object(D.jsx)(Pe.a,{button:!0,onClick:function(){return function(e){c(e),a(!1,"0",0,null),n(""),b.push("/watch/"+e.videoTitle)}(e)},children:Object(D.jsx)(Ue.a,{primary:e.videoTitle})},e.videoId)})):Object(D.jsxs)(Pe.a,{children:[Object(D.jsx)(j.a,{variant:"h6",align:"center",children:"Search not found"})," "]})})};function Be(){var e=Object(r.useState)(""),t=Object(z.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(!1),o=Object(z.a)(i,2),c=o[0],s=o[1],l=Object(r.useState)("0"),u=Object(z.a)(l,2),d=(u[0],u[1]),p=Object(r.useState)(0),b=Object(z.a)(p,2),j=b[0],h=b[1],m=Object(Ie.a)(),x=(Object(Ce.a)(m.breakpoints.up("sm")),Se()),f=function(e,t,n,r){(null===r||"keydown"!==r.type||"Tab"!==r.key&&"Shift"!==r.key)&&(d(t),h(n),s(e))};return Object(r.useEffect)((function(){n.length&&f(!0,"auto",2,null)}),[n]),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)(ye,{style:{zIndex:j},children:[Object(D.jsx)(we,{children:Object(D.jsx)(xe.a,{})}),Object(D.jsx)(ke,{placeholder:"Search for Videos\u2026",value:n,onChange:function(e){return a(e.target.value)},inputProps:{"aria-label":"search"}}),c&&Object(D.jsx)(le.a,{className:x.drawer,sx:{zIndex:"modal",height:0,color:"text.primary"},role:"presentation",onClick:function(e){return f(!1,"0",0,e)},children:Object(D.jsx)(De.a,{children:Object(D.jsx)(ze,{searchedVideo:n,setSearchedVideo:a,toggleDrawer:f})})})]}),c&&Object(D.jsx)(le.a,{onClick:function(e){return f(!1,"0",0,e)},className:x.drawerBackDrop})]})}var Te=function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.a.get("/users/get-details/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=Object(r.createContext)({handleGetUserDetails:function(){return null},userVideos:void 0,userDetails:void 0}),Ne=function(e){var t=e.children,n=Object(r.useState)(void 0),a=Object(z.a)(n,2),i=a[0],o=a[1],c=Object(r.useState)(void 0),s=Object(z.a)(c,2),l=s[0],u=s[1],d=H().updateSnackBarMessage,p=function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te(t.id);case 3:(null===(n=e.sent)||void 0===n?void 0:n.data)&&(o(n.data.videos),u(n.data)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),d("profile not updated, please try again");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsx)(Ee.Provider,{value:{userVideos:i,userDetails:l,handleGetUserDetails:p},children:t})};function Ae(){return Object(r.useContext)(Ee)}var Me=n(580),Re=function(e){var t,n=0;for(t=0;t<e.length;t+=1)n=e.charCodeAt(t)+((n<<5)-n);var r="#";for(t=0;t<3;t+=1){r+="00".concat((n>>8*t&255).toString(16)).substr(-2)}return r},Fe=function(e,t,n){return{sx:{bgcolor:Re(e),width:t,height:n},children:"".concat(e[0])}},We=Object(h.a)((function(e){return{profile:{color:"white"},videos:{minHeight:"90vh"},videoContainer:Object(fe.a)({display:"flex",margin:"10px",padding:"10px",borderRadius:"5px",textOverflow:"ellipsis"},e.breakpoints.down(1200),{flexDirection:"column"}),videoDetailsContainer:Object(fe.a)({padding:"0 10px"},e.breakpoints.down(1200),{paddingTop:"10px"}),iconButton:{position:"absolute",right:"10%",top:"80%",background:"green","&:hover":{background:"green"}},bottomSpace:{marginBottom:"30px"}}})),Le=n(566),Ge=n(575),He=n(571),_e=n(148),Ye=n.n(_e),qe=n(147),Je=n.n(qe),$e=n(265),Ke=n.n($e),Qe=n(264),Xe=n.n(Qe);function Ze(e){var t=e.loggedInUser,n=(e.anchorEl,e.mobileMoreAnchorEl),r=e.setMobileMoreAnchorEl,a=e.setAnchorEl,i=(Boolean(n),Boolean(n)),o=A().logout,c=Object(d.g)(),s=Ae().handleGetUserDetails,l=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(t);case 2:c.push("/profile/".concat(t.username));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(e){"logout"===e?o():"profile"===e?l():"Home"===e?c.push("/home"):c.push("/upload-video"),a(null),p()},p=function(){r(null)};return Object(D.jsxs)(He.a,{anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:i,onClose:p,children:[Object(D.jsx)(Ge.a,{onClick:function(){return u("Home")},children:Object(D.jsxs)(Le.a,{direction:"row",justifyContent:"center",alignItems:"center",children:[Object(D.jsx)(de.a,{size:"large","aria-label":"show 4 new mails",color:"inherit",children:Object(D.jsx)(Xe.a,{color:"primary"})}),Object(D.jsx)(le.a,{style:{color:"#1976D2"},children:"Home"})]})}),Object(D.jsx)(Ge.a,{onClick:function(){return u("profile")},children:Object(D.jsxs)(Le.a,{direction:"row",justifyContent:"center",alignItems:"center",children:[Object(D.jsx)(de.a,{size:"large","aria-label":"show 4 new mails",color:"inherit",children:Object(D.jsx)(Je.a,{color:"primary"})}),Object(D.jsx)(le.a,{style:{color:"#1976D2"},children:"Profile"})]})}),Object(D.jsx)(Ge.a,{onClick:function(){return u("upload")},children:Object(D.jsxs)(Le.a,{direction:"row",justifyContent:"center",alignItems:"center",children:[Object(D.jsx)(de.a,{size:"large","aria-label":"show 4 new mails",color:"inherit",children:Object(D.jsx)(Ke.a,{color:"primary"})}),Object(D.jsx)(le.a,{style:{color:"#1976D2"},children:"Upload Video"})]})}),Object(D.jsx)(Ge.a,{onClick:function(){return u("logout")},children:Object(D.jsxs)(Le.a,{direction:"row",justifyContent:"center",alignItems:"center",children:[Object(D.jsx)(de.a,{size:"large","aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",children:Object(D.jsx)(Ye.a,{color:"primary"})}),Object(D.jsx)(le.a,{style:{color:"#1976D2"},children:"Logout"})," "]})})]})}function et(e){var t=e.loggedInUser,n=e.anchorEl,r=e.setAnchorEl,a=Boolean(n),i=A().logout,o=Object(d.g)(),c=Ae().handleGetUserDetails,s=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:o.push("/profile/".concat(t.username));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(e){"logout"===e?i():"profile"===e&&s(),r(null)};return Object(D.jsxs)(He.a,{anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:a,onClose:l,children:[Object(D.jsx)(Ge.a,{onClick:function(){return l("profile")},children:Object(D.jsxs)(Le.a,{direction:"row",justifyContent:"center",alignItems:"center",children:[Object(D.jsx)(de.a,{size:"large","aria-label":"show 4 new mails",color:"primary",children:Object(D.jsx)(Je.a,{})}),Object(D.jsx)(le.a,{style:{color:"#1976D2"},children:"Profile"})]})}),Object(D.jsxs)(Ge.a,{onClick:function(){return l("logout")},children:[" ",Object(D.jsxs)(Le.a,{direction:"row",justifyContent:"center",alignItems:"center",children:[Object(D.jsx)(de.a,{size:"large","aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"primary",children:Object(D.jsx)(Ye.a,{})}),Object(D.jsx)(le.a,{style:{color:"#1976D2"},children:"Logout"})," "]})]})]})}function tt(e){var t=e.loggedInUser,n=r.useState(null),a=Object(z.a)(n,2),i=a[0],o=a[1],c=r.useState(null),s=Object(z.a)(c,2),l=s[0],u=s[1],p=(Boolean(i),Boolean(l),A().logout,Object(d.g)()),b=Ae().handleGetUserDetails,j=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t);case 2:p.push("/profile/".concat(t.username));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=Object(D.jsx)(et,{loggedInUser:t,setAnchorEl:o,anchorEl:i}),m=Object(D.jsx)(Ze,{setMobileMoreAnchorEl:u,loggedInUser:t,setAnchorEl:o,mobileMoreAnchorEl:l,anchorEl:i});return Object(D.jsxs)(le.a,{sx:{flexGrow:1},children:[Object(D.jsx)(se.a,{position:"static",children:Object(D.jsxs)(ue.a,{sx:{height:50},children:[Object(D.jsx)(de.a,{size:"large",edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){return"/home"},sx:{mr:2},children:Object(D.jsxs)(le.a,{display:"flex",justifyContent:"center",children:[" ",Object(D.jsx)("img",{src:he,alt:"logo",style:{marginRight:"10px"}})," ",Object(D.jsx)(pe.a,{variant:"h6",noWrap:!0,component:"div",sx:{display:{xs:"none",sm:"block"}},children:"VStreamer"})]})}),Object(D.jsx)(Be,{}),Object(D.jsx)(le.a,{sx:{flexGrow:1}}),Object(D.jsxs)(le.a,{sx:{display:{xs:"none",md:"flex"}},children:[Object(D.jsx)(de.a,{size:"large","aria-label":"show 4 new mails",color:"inherit",onClick:function(){return p.push("/home")},children:Object(D.jsx)(pe.a,{children:"Home"})}),Object(D.jsx)(de.a,{size:"large","aria-label":"show 17 new notifications",color:"inherit",onClick:j,children:Object(D.jsx)(pe.a,{children:"My Account"})}),Object(D.jsx)(de.a,{size:"large","aria-label":"show 17 new notifications",color:"inherit",onClick:function(){return p.push("/upload-video")},children:Object(D.jsx)(pe.a,{children:"Upload Video"})}),Object(D.jsx)(de.a,{size:"large",edge:"end","aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},color:"inherit",children:Object(D.jsx)(Me.a,Object(ce.a)(Object(ce.a)({},Fe(t.username.toUpperCase(),50,50)),{},{src:"/image/get-image/".concat(t.id)}))})]}),Object(D.jsx)(le.a,{sx:{display:{xs:"flex",md:"none"}},children:Object(D.jsx)(de.a,{size:"large","aria-label":"show more","aria-controls":"primary-search-account-menu-mobile","aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},color:"inherit",children:Object(D.jsx)(je.a,{})})})]})}),m,h]})}var nt=function(){var e=A().loggedInUser,t=(Ae().userDetails,Object(d.g)()),n=Object(r.useContext)(ie).initSocket;return Object(r.useEffect)((function(){n()}),[n]),void 0===e?Object(D.jsx)(C.a,{}):e?Object(D.jsx)(p.a,{style:{display:e?"block":"none",position:"fixed",width:"100%",top:0,left:0,zIndex:1e3},children:Object(D.jsx)(tt,{loggedInUser:e})}):(t.push("/login"),Object(D.jsx)(C.a,{}))},rt=n(587),at=n(267),it=n.n(at);function ot(e){var t=e.videoSource,n=e.videoPlayerOptions,r=e.setVideoDuration,a=n.width,i=n.height,o=n.autoPlay,c=n.component;n.classes;return Object(D.jsx)(D.Fragment,{children:t?Object(D.jsx)(it.a,{playing:o,controls:!0,width:parseInt(a),onDuration:function(e){return function(e){r((e/60).toFixed(2).toString())}(e)},height:parseInt(i),style:{zIndex:0},url:t}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("video",{id:"videoId",autoPlay:o,width:a,height:i,controls:!0,style:{zIndex:0},children:[Object(D.jsx)("source",{src:t,type:"video/mp4"}),Object(D.jsx)("source",{src:t,type:"video/ogg"}),"Your browser does not support HTML video."]}),"UploadVideoForm"!==c?Object(D.jsx)(rt.a,{sx:{position:"absolute",top:"40%",right:"45%",color:"white"}}):Object(D.jsx)(pe.a,{children:"Select video"})]})})}var ct=n(582),st=n(588),lt=n(82),ut=n.n(lt);function dt(e){var t=e.renderedComponent,n=e.video,a=A().loggedInUser,i=Ae().userDetails,o=Object(r.useState)(!1),c=Object(z.a)(o,2),s=c[0],l=c[1],u=Q().handleGetAllVideos,d=Object(r.useState)(!1),p=Object(z.a)(d,2),b=p[0],j=p[1],h=H().updateSnackBarMessage;Object(r.useEffect)((function(){a&&i&&(a.username===i.username&&"Profile"===t?l(!0):l(!1))}),[a,i,t]);var m=function(){var e=Object(g.a)(v.a.mark((function e(){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,J(n._id);case 4:t=e.sent,(null===(r=t.data)||void 0===r?void 0:r.success)?(u(),h("video successfully deleted")):h("video not deleted, Please try again later"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),h("video not deleted, Please try again later");case 13:j(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(D.jsx)(D.Fragment,{children:s&&Object(D.jsx)(le.a,{display:"flex",justifyContent:"space-between",sx:{position:"absolute",bottom:0,right:0},children:Object(D.jsx)(st.a,{startIcon:Object(D.jsx)(ut.a,{}),disabled:b,onClick:m,variant:"contained",color:"warning",children:b?Object(D.jsx)(rt.a,{style:{fontSize:0,width:"20px",height:"20px"}}):"Delete"})})})}var pt=Object(h.a)({textSpacing:{margin:"5px 0",fontSize:"0.8rem"},imageBox:{height:"16rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},uploadImage:{height:"3rem",width:"3rem",margin:"2rem"},typography:{textAlign:"center",cursor:"pointer"},buttonStyle:{marginBottom:16,marginTop:"2rem",width:"80%"}}),bt=n(100),jt=n.n(bt),ht=n(101),mt=n.n(ht),xt=n(149),ft=n.n(xt),vt=n(99),gt=n.n(vt);function Ot(e){var t=e.videos,n=e.videoPlayerOptions,i=Q(),o=i.handleSetWatchVideo,c=i.watchVideo,s=Object(d.g)(),l=n.classes,u=H().updateSnackBarMessage,p=n.component,b=pt(),j=Object(r.useState)(),h=Object(z.a)(j,2),m=(h[0],h[1]),x=Ae(),f=(x.userDetails,x.handleGetUserDetails);var O=function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t);case 2:s.push("/profile/".concat(t.username));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsx)(a.a.Fragment,{children:t?t.map((function(e){var t,r,a,i;return i=e._id,((null===c||void 0===c?void 0:c._id)!==i||"Watch"!==p)&&Object(D.jsxs)(ct.a,{className:l.videoContainer,children:[Object(D.jsxs)(le.a,{display:"flex",justifyContent:"center",alignItems:"center",sx:{position:"relative",background:"black"},children:[Object(D.jsx)(le.a,{sx:{position:"absolute",width:"100%",height:"100%",cursor:"pointer",zIndex:1},onClick:function(){return function(e){if(void 0===e)return u("Waiting For Server");o(e),s.push("/watch/".concat(e.videoTitle))}(e)}}),Object(D.jsx)(ot,{videoSource:e.videoSource,videoPlayerOptions:n,setVideoDuration:m})]}),n?n.displayDetails&&Object(D.jsxs)(le.a,{className:l.videoDetailsContainer,style:{width:"100%",position:"relative"},children:[Object(D.jsx)(le.a,{children:Object(D.jsx)(pe.a,{variant:"h5",align:"center",children:e.videoTitle})}),Object(D.jsx)(le.a,{}),Object(D.jsx)(le.a,{className:b.textSpacing,children:Object(D.jsxs)(Le.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(D.jsx)(pe.a,{variant:"subtitle1",children:"Posted by: "})," ",Object(D.jsx)(pe.a,{onClick:function(){return O({username:e.username,id:e.userId,email:"undefined"})},sx:{fontWeight:"bold",cursor:"pointer"},color:"primary",children:e.username})]})})," ",Object(D.jsx)(le.a,{className:b.textSpacing,children:Object(D.jsxs)(pe.a,{variant:"subtitle1",children:["Artist: ",e.artist]})}),Object(D.jsx)(le.a,{className:b.textSpacing,children:Object(D.jsxs)(pe.a,{variant:"subtitle1",children:["Category: ",e.videoCategory]})}),Object(D.jsx)(le.a,{className:b.textSpacing,children:Object(D.jsxs)(pe.a,{variant:"subtitle1",children:["Duration: ",e.videoDuration]})})," ",Object(D.jsx)(le.a,{className:b.textSpacing,children:Object(D.jsxs)(pe.a,{variant:"subtitle1",component:"span",children:["Date: \xa0",Object(D.jsx)(pe.a,{style:{fontSize:"0.8rem"},component:"span",children:gt()(e.datePosted).format("MMMM Do YYYY")})]})}),Object(D.jsx)(le.a,{className:b.textSpacing,children:Object(D.jsxs)(Le.a,{direction:"row",spacing:2,children:[" ",Object(D.jsxs)(le.a,{children:[" ",Object(D.jsx)(jt.a,{sx:{color:"green",marginRight:"7px"}}),null===(t=e.likes)||void 0===t?void 0:t.length]})," ",Object(D.jsxs)(le.a,{children:[Object(D.jsx)(mt.a,{sx:{color:"red",marginRight:"7px"}}),null===(r=e.dislikes)||void 0===r?void 0:r.length]})]})}),Object(D.jsx)(le.a,{className:b.textSpacing,children:Object(D.jsxs)(pe.a,{variant:"subtitle1",children:[Object(D.jsx)(ft.a,{sx:{marginRight:"7px"}}),null===(a=e.views)||void 0===a?void 0:a.length]})}),Object(D.jsx)(dt,{renderedComponent:p,video:e})]}):""]},e._id)})):Object(D.jsx)(pe.a,{children:"No Videos to Display"})})}var wt=Object(h.a)((function(e){return{root:{minHeight:"100vh","& .MuiInput-underline:before":{borderBottom:"1.2px solid rgba(0, 0, 0, 0.2)",background:"#F2F2F7 "}},profile:{minHeight:"90vh"},videoContainer:Object(fe.a)({display:"flex",margin:"10px",padding:"10px",backgroundColor:"#f2f2f7",borderRadius:"5px"},e.breakpoints.down("sm"),{flexDirection:"column"}),videos:{minHeight:"90vh"},videoDetailsContainer:Object(fe.a)({padding:"0 10px"},e.breakpoints.down("sm"),{display:"none"})}}));function yt(){var e=wt(),t=(A().loggedInUser,Q()),n=t.allVideos,a=t.handleGetAllVideos,i=Object(Ie.a)(),o={width:"550",height:Object(Ce.a)(i.breakpoints.up("sm"))?"300":"200",autoPlay:!1,displayDetails:!0,component:"Home",classes:e};return Object(r.useEffect)((function(){void 0===n&&a()}),[n]),Object(D.jsx)(b.a,{container:!0,component:"div",children:Object(D.jsx)(b.a,{item:!0,lg:10,md:11,sm:10,xs:12,style:{minHeight:"100vh",padding:" 25px  10px",margin:"0 auto"},children:Object(D.jsx)(Ot,{videos:n,videoPlayerOptions:o})})})}var kt=n(69),St=n(567),It=n(579),Ct=n(589),Dt=n(578),Vt=function(e){var t,n=0;for(t=0;t<e.length;t+=1)n=e.charCodeAt(t)+((n<<5)-n);var r="#";for(t=0;t<3;t+=1){r+="00".concat((n>>8*t&255).toString(16)).substr(-2)}return r},Pt=function(e,t,n){return{sx:{bgcolor:Vt(e),width:t,height:n},children:"".concat(e[0])}},Ut=Object(h.a)((function(){return{root:{minHeight:"100vh","& .MuiInput-underline:before":{borderBottom:"1.2px solid rgba(0, 0, 0, 0.2)"}},profile:{minHeight:"90vh"},videos:{minHeight:"90vh"},videoContainer:{marginBottom:"5px "},addCommentBtn:{position:"absolute",marginTop:"-3rem",right:"0%",background:"#1976D2"}}})),zt=function(){var e=Object(g.a)(v.a.mark((function e(t,n,r,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("/likes/add-like",{loggedInUsername:t,userId:n,videoId:r,userImage:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Bt=function(){var e=Object(g.a)(v.a.mark((function e(t,n,r){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("/likes/add-dislike",{loggedInUsername:t,userId:n,videoId:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Tt=function(){var e=Object(g.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("/likes/remove-like",{userId:t,videoId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Et=function(){var e=Object(g.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("/likes/remove-dislike",{userId:t,videoId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function Nt(){Ut();var e=Q(),t=e.allVideos,n=e.watchVideo,a=e.handleGetAllVideos,i=e.handleSetWatchVideo,o=A().loggedInUser,c=Object(r.useState)([]),s=Object(z.a)(c,2),l=s[0],u=s[1],d=Object(r.useState)([]),p=Object(z.a)(d,2),b=p[0],j=p[1],h=H().updateSnackBarMessage;Object(r.useEffect)((function(){u(null===n||void 0===n?void 0:n.likes),j(null===n||void 0===n?void 0:n.dislikes)}),[n]),Object(r.useEffect)((function(){t&&i(n)}),[t]);var m=function(e){var t=null===e||void 0===e?void 0:e.filter((function(e){return e.userId===(null===o||void 0===o?void 0:o.id)}));return!!(null===t||void 0===t?void 0:t.length)},x=function(){var e=Object(g.a)(v.a.mark((function e(){var t,r,i,c,s,u,d;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=32;break}if(!n){e.next=32;break}if(t=n._id,r=n.userId,i=t,e.prev=4,!m(b)){e.next=8;break}return e.next=8,f();case 8:if(!m(l)){e.next=17;break}return e.next=11,Tt(r,i);case 11:if(c=e.sent,!(null===(s=c.data)||void 0===s?void 0:s.success)){e.next=15;break}return e.abrupt("return",a());case 15:e.next=26;break;case 17:return e.next=19,zt(o.username,r,i,o.userImage);case 19:if(u=e.sent,!(null===(d=u.data)||void 0===d?void 0:d.success)){e.next=25;break}return e.abrupt("return",a());case 25:h("something went wrong,please try again");case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(4),console.error(e.t0),h("something went wrong,please try again");case 32:case"end":return e.stop()}}),e,null,[[4,28]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(g.a)(v.a.mark((function e(){var t,r,i,c,s,u,d;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=31;break}if(!n){e.next=31;break}if(t=n._id,r=n.userId,i=t,e.prev=4,!m(l)){e.next=8;break}return e.next=8,x();case 8:if(!m(b)){e.next=17;break}return e.next=11,Et(r,i);case 11:if(c=e.sent,!(null===(s=c.data)||void 0===s?void 0:s.success)){e.next=15;break}return e.abrupt("return",a());case 15:e.next=26;break;case 17:return e.next=19,Bt(o.username,r,i);case 19:if(u=e.sent,!(null===(d=u.data)||void 0===d?void 0:d.success)){e.next=25;break}return e.abrupt("return",a());case 25:h("something went wrong,please try again");case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(4),h("something went wrong,please try again");case 31:case"end":return e.stop()}}),e,null,[[4,28]])})));return function(){return e.apply(this,arguments)}}();return Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(Le.a,{direction:"row",spacing:1,children:[Object(D.jsxs)(Le.a,{direction:"row",alignItems:"center",children:[Object(D.jsx)(de.a,{"aria-label":"update",onClick:x,size:"small",children:Object(D.jsx)(jt.a,{sx:{color:m(l)?"green":"#757575"}})}),Object(D.jsxs)(pe.a,{children:[" ",null===l||void 0===l?void 0:l.length]})]}),Object(D.jsxs)(Le.a,{direction:"row",alignItems:"center",children:[Object(D.jsx)(de.a,{"aria-label":"update",size:"small",onClick:f,children:Object(D.jsx)(mt.a,{sx:{color:m(b)?"red":"#757575"}})}),Object(D.jsxs)(pe.a,{children:[" ",null===b||void 0===b?void 0:b.length]})]})]})})}var At=n(562),Mt=n(268),Rt=n.n(Mt),Ft=function(){var e=Object(g.a)(v.a.mark((function e(t,n,r,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("/comment/add-comment",{comment:t,userId:n,videoId:r,loggedInUsername:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Wt=function(){var e=Object(g.a)(v.a.mark((function e(t,n,r,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("/comment/edit-comment",{comment:t,userId:n,videoId:r,commentId:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Lt=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,r,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,r=t.videoId,a=t.commentId,e.next=3,Y.a.post("/comment/delete-comment",{userId:n,videoId:r,commentId:a});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Gt(e){var t=e.openComment,n=e.setOpenComment,a=e.isEditComment,i=e.setEditComment,o=e.comment,c=e.setComment,s=e.commentId,l=Ut(),u=Q(),d=u.allVideos,p=u.watchVideo,b=u.handleGetAllVideos,j=u.handleSetWatchVideo,h=A().loggedInUser,m=H().updateSnackBarMessage;Object(r.useEffect)((function(){d&&j(p)}),[d]);var x=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,r,a,i,c,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o){e.next=3;break}return e.abrupt("return");case 3:if(n=null===h||void 0===h?void 0:h.username,!p){e.next=19;break}return r=p.userId,a=p._id,i=a,e.prev=7,e.next=10,Ft(o,r,i,n);case 10:c=e.sent,(null===(s=c.data)||void 0===s?void 0:s.success)&&(b(),O()),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),console.error(e.t0),m("comment not added");case 19:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,r,a,i,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o){e.next=3;break}return e.abrupt("return");case 3:if(!p){e.next=18;break}return n=p.userId,r=p._id,a=r,e.prev=6,e.next=9,Wt(o,n,a,s);case 9:i=e.sent,(null===(c=i.data)||void 0===c?void 0:c.success)&&(b(),O()),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),console.error(e.t0),m("comment not updated");case 18:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){n(!1),c(""),i(!1)};return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(le.a,{sx:{padding:"10px 60px",borderRadius:"5px",position:"fixed",minHeight:80,width:t?"64%":"5%",bottom:0,right:"31%"},children:t?Object(D.jsx)(le.a,{sx:{background:"white",width:"100%"},children:Object(D.jsxs)("form",{onSubmit:a?f:x,style:{width:"100%"},children:[Object(D.jsx)(At.a,{"aria-label":"minimum height",id:"commentInput",minRows:2,value:o,onChange:function(e){return c(e.target.value)},placeholder:"add a comment",style:{width:"100%",background:"#f9f9f9",padding:"5px",borderRadius:"5px",resize:"none"}}),Object(D.jsxs)(Le.a,{direction:"row",justifyContent:"flex-end",spacing:1,children:[" ",Object(D.jsx)(st.a,{size:"small",type:"submit",color:"primary",variant:"contained",children:"Comment"}),Object(D.jsx)(st.a,{type:"submit",onClick:O,size:"small",color:"primary",variant:"contained",children:"Cancel"})]})]})}):Object(D.jsxs)(le.a,{sx:{position:"relative",width:"10%",background:"green",float:"right"},children:[Object(D.jsxs)(de.a,{sx:{position:"absolute",marginTop:"-3rem",boxShadow:" 0px 0px 9px 0px rgba(0,0,0,0.75)",right:"0%",background:"#f9f9f9",color:"#1976D2","&:hover":{background:"#1976D2",color:"white"}},className:l.addCommentBtn,"aria-label":"update",onClick:function(){n(!0);var e=document.getElementById("commentInput");null!==e&&(e.focus(),e.click())},size:"large",children:[Object(D.jsx)(Rt.a,{sx:{fontSize:"50px"}})," "]}),Object(D.jsx)(pe.a,{sx:{position:"absolute",marginTop:"1.5rem",right:"0%",color:"#1976D2"},children:"comment"})]})})})}var Ht=function(){var e=Object(g.a)(v.a.mark((function e(t,n,r,a,i){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("/comment/add-like",{loggedInUsername:t,userId:n,videoId:r,userImage:i,commentId:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),_t=function(){var e=Object(g.a)(v.a.mark((function e(t,n,r,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("/comment/add-dislike",{loggedInUsername:t,userId:n,videoId:r,commentId:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Yt=function(){var e=Object(g.a)(v.a.mark((function e(t,n,r){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("/comment/remove-like",{userId:t,videoId:n,commentId:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),qt=function(){var e=Object(g.a)(v.a.mark((function e(t,n,r){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("/comment/remove-dislike",{userId:t,videoId:n,commentId:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function Jt(e){var t,n,a,i,o=e.comment,c=(Ut(),Q()),s=c.allVideos,l=c.watchVideo,u=c.handleGetAllVideos,d=c.handleSetWatchVideo,p=A().loggedInUser,b=Object(r.useState)([]),j=Object(z.a)(b,2),h=(j[0],j[1],H().updateSnackBarMessage);Object(r.useEffect)((function(){s&&d(l)}),[s]);var m=function(e){var t=null===e||void 0===e?void 0:e.filter((function(e){return e.userId===(null===p||void 0===p?void 0:p.id)}));return!!(null===t||void 0===t?void 0:t.length)},x=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n,r,a,i,c,s,d;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=30;break}if(!l){e.next=30;break}if(t=l._id,n=l.userId,r=o._id,a=t,e.prev=5,!m(null===o||void 0===o?void 0:o.dislikes)){e.next=9;break}return e.next=9,f();case 9:if(!m(o.likes)){e.next=18;break}return e.next=12,Yt(n,a,r);case 12:if(i=e.sent,!(null===(c=i.data)||void 0===c?void 0:c.success)){e.next=16;break}return e.abrupt("return",u());case 16:e.next=24;break;case 18:return e.next=20,Ht(p.username,n,a,r,null===p||void 0===p?void 0:p.userImage);case 20:if(s=e.sent,!(null===(d=s.data)||void 0===d?void 0:d.success)){e.next=24;break}return e.abrupt("return",u());case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(5),console.error(e.t0),h("like not updated");case 30:case"end":return e.stop()}}),e,null,[[5,26]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n,r,a,i,c,s,d;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=30;break}if(!l){e.next=30;break}if(t=l._id,n=l.userId,r=t,a=o._id,e.prev=5,!m(o.likes)){e.next=9;break}return e.next=9,x();case 9:if(!m(o.dislikes)){e.next=18;break}return e.next=12,qt(n,r,a);case 12:if(i=e.sent,!(null===(c=i.data)||void 0===c?void 0:c.success)){e.next=16;break}return e.abrupt("return",u());case 16:e.next=24;break;case 18:return e.next=20,_t(p.username,n,r,a);case 20:if(s=e.sent,!(null===(d=s.data)||void 0===d?void 0:d.success)){e.next=24;break}return e.abrupt("return",u());case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(5),console.error(e.t0),h("dislike not updated");case 30:case"end":return e.stop()}}),e,null,[[5,26]])})));return function(){return e.apply(this,arguments)}}();return Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(Le.a,{direction:"row",spacing:1,children:[Object(D.jsxs)(Le.a,{direction:"row",alignItems:"center",children:[Object(D.jsxs)(de.a,{"aria-label":"update",onClick:x,size:"small",children:[Object(D.jsx)(jt.a,{sx:{fontSize:"1.2rem",color:m(o.likes)?"green":""}})," "]})," ",Object(D.jsx)(pe.a,{children:0!==(null===(t=o.likes)||void 0===t?void 0:t.length)&&(null===(n=o.likes)||void 0===n?void 0:n.length)})]}),Object(D.jsxs)(Le.a,{direction:"row",alignItems:"center",children:[Object(D.jsx)(de.a,{"aria-label":"update",onClick:f,size:"small",children:Object(D.jsx)(mt.a,{sx:{fontSize:"1.2rem",color:m(o.dislikes)?"red":""}})}),Object(D.jsx)(pe.a,{children:0!==(null===(a=o.dislikes)||void 0===a?void 0:a.length)&&(null===(i=o.dislikes)||void 0===i?void 0:i.length)})]})]})})}var $t=n(150),Kt=n.n($t);function Qt(e){var t=e.commentId,n=e.setOpenComment,a=e.setEditComment,i=e.setComment,o=e.comment,c=e.setCommentId,s=(Ut(),Q()),l=s.allVideos,u=s.watchVideo,d=s.handleGetAllVideos,p=s.handleSetWatchVideo,b=H().updateSnackBarMessage;Object(r.useEffect)((function(){l&&p(u)}),[l]);var j=function(){var e=Object(g.a)(v.a.mark((function e(){var n,r,a,i,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=15;break}return n=u.userId,r=u._id,a=r,e.prev=3,e.next=6,Lt({commentId:t,userId:n,videoId:a});case 6:i=e.sent,(null===(o=i.data)||void 0===o?void 0:o.success)&&d(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0),b("Comment not deleted");case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(Le.a,{direction:"row",spacing:1,children:[" ",Object(D.jsxs)(de.a,{"aria-label":"update",color:"primary",onClick:function(){i(o),n(!0),a(!0),t&&c(t)},size:"small",children:[Object(D.jsx)(Kt.a,{sx:{fontSize:"1.2rem"}})," "]}),Object(D.jsxs)(de.a,{"aria-label":"update",onClick:j,size:"small",children:[Object(D.jsx)(ut.a,{sx:{fontSize:"1.2rem",color:"red"}})," "]})]})})}function Xt(e){var t,n,a=e.displayCommentBtn,i=(Ut(),Q()),o=i.allVideos,c=i.watchVideo,s=i.handleSetWatchVideo,l=A().loggedInUser,u=Object(r.useState)(""),p=Object(z.a)(u,2),b=p[0],j=p[1],h=Ae().handleGetUserDetails,m=Object(r.useState)(!1),x=Object(z.a)(m,2),f=x[0],v=x[1],g=Object(r.useState)(""),O=Object(z.a)(g,2),w=O[0],y=O[1],k=Object(d.g)(),S=Object(r.useState)(!1),I=Object(z.a)(S,2),C=I[0],V=I[1];Object(r.useEffect)((function(){o&&s(c)}),[o]);var P=function(){if(c){var e={username:c.username,id:c.userId,email:"undefined"};h(e),k.push("/profile/".concat(c.username))}};return Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(le.a,{style:{minHeight:"100px",paddingTop:"20px",whiteSpace:"nowrap"},children:[Object(D.jsx)(pe.a,{sx:{margin:"10px",marginLeft:{xs:"2rem",sm:"2rem",md:"9rem",lg:"9rem",xl:"9rem"}},children:"Comments"}),Object(D.jsxs)(le.a,{sx:{marginLeft:{xs:"0rem",sm:"0rem",md:"5rem",lg:"5rem",xl:"5rem"},padding:"40px 0"},children:[(null===c||void 0===c||null===(t=c.comments)||void 0===t?void 0:t.length)?null===c||void 0===c||null===(n=c.comments)||void 0===n?void 0:n.map((function(e){return Object(D.jsxs)(le.a,{children:[Object(D.jsxs)(Le.a,{direction:"row",alignItems:"center",spacing:2,children:[Object(D.jsx)(Dt.a,Object(ce.a)(Object(ce.a)({style:{cursor:"pointer",border:"1px solid #1976D2"},onClick:P},Pt(e.username.toUpperCase(),45,45)),{},{src:"/image/get-image/".concat(e.userId)})),Object(D.jsx)(pe.a,{style:{cursor:"pointer"},color:"primary",onClick:P,children:e.username}),Object(D.jsx)(pe.a,{style:{fontSize:"0.8rem"},children:gt()(e.commentDate).format("MMMM Do YYYY")})]}),Object(D.jsxs)(Le.a,{sx:{marginLeft:{xs:"3rem",sm:"3rem",md:"4rem",lg:"4rem",xl:"4rem"}},children:[Object(D.jsx)(ct.a,{sx:{padding:"10px",borderRadius:"5px",background:"white",minHeight:80,width:{xs:"100%",sm:"90%"},overflowWrap:"break-word",whiteSpace:"pre-wrap"},children:Object(D.jsx)(pe.a,{children:e.comment})}),Object(D.jsxs)(Le.a,{sx:{marginLeft:{xs:"2px",sm:"2px",md:"5px",lg:"5px",xl:"5px"},marginTop:"5px"},direction:"row",spacing:3,children:[Object(D.jsx)(Jt,{comment:e}),(null===l||void 0===l?void 0:l.id)===e.userId&&Object(D.jsx)(Qt,{setOpenComment:v,commentId:e._id,comment:e.comment,setEditComment:V,setComment:j,setCommentId:y})]})]})]},e._id)})):Object(D.jsx)(pe.a,{align:"center",children:"No comment for this video"})," ",!a&&Object(D.jsx)(Gt,{openComment:f,isEditComment:C,setEditComment:V,comment:b,setOpenComment:v,setComment:j,commentId:w})]})]})})}var Zt=function(){var e=Object(g.a)(v.a.mark((function e(t,n,r){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("/views/add-viewer",{loggedInUsername:t,userId:n,videoId:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function en(){var e=Q(),t=e.watchVideo,n=e.handleGetAllVideos,a=e.handleSetWatchVideo,i=e.allVideos,o=A().loggedInUser,c=H().updateSnackBarMessage,s=Object(r.useState)([]),l=Object(z.a)(s,2),u=l[0],d=l[1],p=function(){var e=Object(g.a)(v.a.mark((function e(){var r,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=13;break}return e.prev=1,e.next=4,Zt(null===o||void 0===o?void 0:o.username,null===t||void 0===t?void 0:t.userId,null===t||void 0===t?void 0:t._id);case 4:r=e.sent,(null===(a=r.data)||void 0===a?void 0:a.success)&&n(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),c("viewer not added");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){i&&a(t)}),[i]),Object(r.useEffect)((function(){(null===t||void 0===t?void 0:t.views)&&t.views.filter((function(e){return e.userId===(null===o||void 0===o?void 0:o.id)})).length||p(),(null===t||void 0===t?void 0:t.views)&&d(t.views)}),[t]),Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(Le.a,{direction:"row",spacing:1,children:[Object(D.jsx)(pe.a,{children:u.length}),Object(D.jsx)(ft.a,{}),Object(D.jsx)(pe.a,{children:"views"})]})})}var tn=n(269),nn=n.n(tn);function rn(){var e=Ut(),t=Ae().handleGetUserDetails,n=Q(),a=n.allVideos,i=n.watchVideo,o=(n.handleGetAllVideos,n.handleSetWatchVideo,Object(r.useState)(void 0)),c=Object(z.a)(o,2),s=c[0],l=c[1],u=Object(r.useState)(void 0),p=Object(z.a)(u,2),b=(p[0],p[1]),j=Object(r.useState)(!1),h=Object(z.a)(j,2),m=h[0],x=h[1],f=Object(kt.a)(),O=(Object(St.a)(f.breakpoints.up("sm")),Object(d.g)());Object(r.useEffect)((function(){(null===i||void 0===i?void 0:i.videoSource.includes("youtube"))?l((null===i||void 0===i?void 0:i.videoSource)+"?autoplay=1"):l(null===i||void 0===i?void 0:i.videoSource)}),[i]);var w={width:"850",height:"480",autoPlay:!0,component:"Watch",classes:e},y={width:"300",height:"200",autoPlay:!1,displayDetails:!1,component:"Watch",classes:e},k=function(){var e=Object(g.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=5;break}return n={username:i.username,id:i.userId,email:"undefined"},e.next=4,t(n);case 4:O.push("/profile/".concat(i.username));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(It.a,{container:!0,style:{paddingTop:"30px",position:"relative"},className:"viewed-video-container",children:[Object(D.jsx)(It.a,{item:!0,xs:12,sm:12,md:9,className:"viewed-video-box",sx:{paddingBottom:5,paddingLeft:"10px",paddingRight:{xs:"10px",sm:"10px",md:"0"}},children:Object(D.jsxs)(le.a,{display:"flex",flexDirection:"column",children:[Object(D.jsxs)(le.a,{display:"flex",justifyContent:"center",sx:{background:"black"},children:[Object(D.jsx)(ot,{videoSource:s,videoPlayerOptions:w,setVideoDuration:b})," ",Object(D.jsx)(nn.a,{children:function(e){var t=e.isVisible;x(t)}})]}),Object(D.jsxs)(Ct.a,{sx:{borderBottom:"2px solid #f9f9f9",background:"white"},children:[Object(D.jsxs)(le.a,{sx:{padding:"10px 0",whiteSpace:"nowrap"},children:[Object(D.jsxs)(Le.a,{direction:"row",alignItems:"center",children:[Object(D.jsxs)(Le.a,{direction:"row",spacing:1,style:{flexGrow:1},alignItems:"center",children:[Object(D.jsx)(pe.a,{variant:"h5",children:null===i||void 0===i?void 0:i.videoTitle})," ",(null===i||void 0===i?void 0:i.artist)&&Object(D.jsx)(pe.a,{variant:"h5",children:"-"}),Object(D.jsx)(pe.a,{variant:"h5",children:null===i||void 0===i?void 0:i.artist})," "]}),Object(D.jsxs)(Le.a,{direction:"row",spacing:1,alignItems:"center",children:[" ",Object(D.jsx)(pe.a,{color:"primary",sx:{cursor:"pointer"},onClick:k,variant:"h5",children:null===i||void 0===i?void 0:i.username}),Object(D.jsx)(Dt.a,Object(ce.a)(Object(ce.a)({style:{cursor:"pointer",border:"1px solid #1976D2"},onClick:k},Pt(i?i.username.toUpperCase():"",50,50)),{},{src:"/image/get-image/".concat(null===i||void 0===i?void 0:i.userId)}))]})]}),Object(D.jsx)(le.a,{sx:{margin:"5px auto"},children:Object(D.jsx)(pe.a,{children:null===i||void 0===i?void 0:i.videoDescription})}),Object(D.jsxs)(Le.a,{direction:"row",alignItems:"center",sx:{margin:"5px auto"},children:[Object(D.jsx)(le.a,{display:"flex",alignItems:"center",style:{flexGrow:1},children:Object(D.jsxs)(Le.a,{direction:"row",spacing:5,alignItems:"center",children:[" ",Object(D.jsx)(Nt,{}),Object(D.jsx)(en,{})]})})," ",Object(D.jsx)(le.a,{children:Object(D.jsxs)(Le.a,{direction:"row",spacing:5,alignItems:"center",children:[Object(D.jsx)(pe.a,{style:{fontSize:"0.9rem"},children:gt()(null===i||void 0===i?void 0:i.datePosted).format("MMMM Do YYYY")}),Object(D.jsx)(pe.a,{children:null===i||void 0===i?void 0:i.videoCategory})]})})]})]})," "]}),Object(D.jsx)(Ct.a,{sx:{padding:0},children:Object(D.jsxs)(It.a,{container:!0,sx:{position:"relative"},children:[Object(D.jsxs)(It.a,{item:!0,xs:12,sm:8,md:12,sx:{},children:[" ",Object(D.jsx)(Xt,{displayCommentBtn:m})]}),Object(D.jsxs)(It.a,{item:!0,xs:4,sx:{overflowY:"scroll",top:0,bottom:0,right:-17,position:"absolute",display:{sm:"block",xs:"none",md:"none"},paddingTop:"0"},children:[" ",Object(D.jsx)(Ot,{videoPlayerOptions:y,videos:a})]})]})})]})}),Object(D.jsx)(It.a,{item:!0,md:3,sx:{position:"relative",display:{sm:"none",xs:"none",md:"block"},overflow:"hidden"},className:"all-video-container",children:Object(D.jsx)(le.a,{sx:{overflowY:"scroll",top:0,bottom:0,left:0,right:-17,position:"absolute",padding:"10px",paddingTop:"0"},children:Object(D.jsx)(Ot,{videoPlayerOptions:y,videos:a})})})]})})}var an=n(272),on=n.n(an),cn=n(273),sn=n.n(cn),ln=function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("image",t),e.abrupt("return",Y.a.post("/image/upload-image",n,{headers:{"Content-Type":"multipart/form-data"}}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),un=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y.a.delete("/image/delete-image"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),dn=n(271),pn=n.n(dn),bn=n(152);function jn(e){var t=e.user,n=We(),a=Ae(),i=(a.userDetails,a.handleGetUserDetails),o=Object(r.useState)(null),c=Object(z.a)(o,2),s=c[0],l=c[1],u=Object(r.useState)(void 0),d=Object(z.a)(u,2),p=d[0],b=d[1],j=Object(r.useState)(!1),h=Object(z.a)(j,2),m=h[0],x=h[1],f=Object(r.useState)(!1),O=Object(z.a)(f,2),w=(O[0],O[1]),y=H().updateSnackBarMessage,k=Object(r.useState)(!1),S=Object(z.a)(k,2),I=S[0],C=S[1],V=Object(r.useCallback)((function(e){l(e[0]),b(URL.createObjectURL(e[0]))}),[l]),P=Object(bn.a)({onDrop:V,multiple:!1,accept:"image/jpeg, image/png"}),U=P.getRootProps,B=P.getInputProps,T=P.isDragReject,E=function(){var e=Object(g.a)(v.a.mark((function e(){var n,r,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),C(!0),e.prev=2,e.next=5,ln(s);case 5:n=e.sent,(r=n.data)&&(r.success?(i({username:t.username,id:t.userId,email:"undefined"}),b(void 0),x(!1)):(null===r||void 0===r?void 0:r.error)&&y(null===r||void 0===r||null===(a=r.error)||void 0===a?void 0:a.message)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0),y("Unexpected error! Please try again");case 14:w(!1),C(!1);case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(g.a)(v.a.mark((function e(){var n,r,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),b(void 0),C(!0),e.prev=3,e.next=6,un();case 6:n=e.sent,(r=n.data)&&(r.success?(i({username:t.username,id:t.userId,email:"undefined"}),b(void 0),x(!1)):(null===r||void 0===r?void 0:r.error)&&y(null===r||void 0===r||null===(a=r.error)||void 0===a?void 0:a.message)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0),y("Unexpected error! Please try again");case 15:w(!1),C(!1);case 17:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return Object(D.jsxs)(D.Fragment,{children:[m&&Object(D.jsx)(le.a,{onClick:function(){return x(!1)},sx:{position:"fixed",width:"100%",height:"100vh",left:0,top:0}}),Object(D.jsxs)(le.a,{className:n.bottomSpace,sx:{position:"relative"},children:[Object(D.jsx)(Dt.a,Object(ce.a)(Object(ce.a)({},Fe(t.username.toUpperCase(),100,100)),{},{src:void 0===p?void 0!==(null===t||void 0===t?void 0:t.userImage)?"/image/download-image/".concat(t.userImage):"":p})),m?Object(D.jsxs)(ct.a,{sx:{position:"absolute",whiteSpace:"nowrap",display:"flex",flexDirection:"column",alignItems:"center",padding:"10px",margin:"0 auto"},children:[void 0===p?Object(D.jsxs)("div",Object(ce.a)(Object(ce.a)({},U()),{},{children:[Object(D.jsx)("input",Object(ce.a)({},B())),T?Object(D.jsx)(le.a,{children:"Drop "}):Object(D.jsx)(st.a,{sx:{marginBottom:"10px"},startIcon:Object(D.jsx)(on.a,{}),variant:"contained",color:"info",children:"browse"})]})):Object(D.jsx)(st.a,{sx:{marginBottom:"10px"},startIcon:Object(D.jsx)(sn.a,{}),variant:"contained",color:"success",type:"submit",onClick:E,children:I?Object(D.jsx)(rt.a,{style:{fontSize:0,width:"20px",height:"20px"}}):"Save"}),Object(D.jsx)(st.a,{onClick:N,startIcon:Object(D.jsx)(ut.a,{}),variant:"contained",color:"secondary",children:"Delete"})]}):Object(D.jsx)(de.a,{sx:{position:"absolute",right:"10%",top:"80%",background:"green","&:hover":{background:"green"}},"aria-label":"update",onClick:function(){return x(!0)},children:Object(D.jsx)(pn.a,{sx:{color:"white"}})})]})]})}var hn=function(){var e=Object(g.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("/follow/add-follower",{loggedInUsername:t,userId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),mn=function(){var e=Object(g.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("/follow/remove-follower",{loggedInUsername:t,userId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function xn(){var e=A().loggedInUser,t=Ae(),n=t.userDetails,a=t.handleGetUserDetails,i=Object(r.useState)(!1),o=Object(z.a)(i,2),c=o[0],s=o[1],l=(Q().handleGetAllVideos,Object(r.useState)(!1)),u=Object(z.a)(l,2),d=u[0],p=u[1],b=Object(r.useState)(!1),j=Object(z.a)(b,2),h=j[0],m=j[1],x=H().updateSnackBarMessage;Object(r.useEffect)((function(){e&&n&&(e.id===n.userId?s(!0):s(!1))}),[e,n]),Object(r.useEffect)((function(){e&&n&&(n.followers.filter((function(t){return t.userId===e.id})).length?m(!0):m(!1))}),[n]);var f=function(){var t=Object(g.a)(v.a.mark((function t(){var r,i,o,c,s,l,u;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p(!0),!n){t.next=32;break}if(r=null===e||void 0===e?void 0:e.username,i=null===n||void 0===n?void 0:n.userId,o=null===n||void 0===n?void 0:n.username,!h){t.next=20;break}return t.prev=6,t.next=9,mn(r,i);case 9:c=t.sent,(null===(s=c.data)||void 0===s?void 0:s.success)?a({username:o,id:i,email:"undefined"}):x("something went wrong,please try again"),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(6),console.error(t.t0),x("something went wrong,please try again");case 18:t.next=32;break;case 20:return t.prev=20,t.next=23,hn(r,i);case 23:l=t.sent,(null===(u=l.data)||void 0===u?void 0:u.success)?a({username:o,id:i,email:"undefined"}):x("something went wrong,please try again"),t.next=32;break;case 28:t.prev=28,t.t1=t.catch(20),console.error(t.t1),x("something went wrong,please try again");case 32:p(!1);case 33:case"end":return t.stop()}}),t,null,[[6,14],[20,28]])})));return function(){return t.apply(this,arguments)}}();return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(le.a,{style:{marginBottom:30},children:!c&&Object(D.jsx)(st.a,{onClick:f,disabled:d,style:{color:"white"},color:"secondary",variant:"contained",children:h?"unfollow":"follow"})})})}var fn=function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.a.post("/about/update-about",{aboutUser:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function vn(){var e=A().loggedInUser,t=Ae(),n=t.userDetails,a=t.handleGetUserDetails,i=Object(r.useState)(!1),o=Object(z.a)(i,2),c=o[0],s=o[1],l=We(),u=Object(r.useState)(!1),d=Object(z.a)(u,2),p=d[0],b=d[1],j=Object(r.useState)(!1),h=Object(z.a)(j,2),m=(h[0],h[1],Object(r.useState)(null===n||void 0===n?void 0:n.aboutUser)),x=Object(z.a)(m,2),f=x[0],O=x[1],w=Object(r.useState)(!0),y=Object(z.a)(w,2),k=y[0],S=y[1],I=H().updateSnackBarMessage;Object(r.useEffect)((function(){e&&n&&(e.id===n.userId?s(!0):s(!1))}),[e,n]),Object(r.useEffect)((function(){n&&O(null===n||void 0===n?void 0:n.aboutUser)}),[n]);var C=function(){var e=Object(g.a)(v.a.mark((function e(){var t,r,i,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!0),!n){e.next=22;break}return t=null===n||void 0===n?void 0:n.userId,r=null===n||void 0===n?void 0:n.username,e.prev=4,e.next=7,fn(f);case 7:if(i=e.sent,!(null===(o=i.data)||void 0===o?void 0:o.success)){e.next=14;break}return e.next=12,a({username:r,id:t,email:"undefined"});case 12:e.next=15;break;case 14:I("something went wrong,please try again");case 15:S(!0),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),console.error(e.t0),I("something went wrong,please try again");case 22:b(!1);case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(){return e.apply(this,arguments)}}();return Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(le.a,{className:l.bottomSpace,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly",style:{width:"100%"},children:[Object(D.jsx)(pe.a,{style:{margin:"5px"},variant:"h6",children:"About"}),Object(D.jsxs)(le.a,{style:{width:"90%",position:"relative"},children:[k&&c&&Object(D.jsx)(de.a,{sx:{position:"absolute",top:"-13%",right:"0%"},"aria-label":"update",color:"primary",onClick:function(){return S(!1)},children:Object(D.jsx)(Kt.a,{sx:{color:"white"}})}),k?Object(D.jsx)(le.a,{style:{width:"100%",minHeight:150,borderRadius:"5px",padding:" 10px",overflowWrap:"break-word"},children:f?Object(D.jsx)(pe.a,{align:"center",children:f}):c&&Object(D.jsx)(pe.a,{align:"center",variant:"subtitle1",children:"write something about yourself"})}):Object(D.jsxs)(le.a,{style:{width:"100%"},children:[Object(D.jsx)(At.a,{"aria-label":"minimum height",onChange:function(e){return O(e.target.value.slice(0,100))},value:f,minRows:4,style:{width:"100%",borderRadius:"5px",resize:"none"}}),Object(D.jsxs)(Le.a,{direction:"row",justifyContent:"center",spacing:2,sx:{padding:"15px 10px"},children:[Object(D.jsx)(st.a,{disabled:p,style:{width:"87px"},onClick:C,variant:"contained",children:p?Object(D.jsx)(rt.a,{style:{fontSize:0,width:"20px",height:"20px"}}):"save"}),Object(D.jsx)(st.a,{onClick:function(){S(!0),O(null===n||void 0===n?void 0:n.aboutUser)},color:"primary",variant:"contained",children:"cancel"})]})]})]})]})})}function gn(){var e=We(),t=Q().allVideos,n=Ae(),a=n.userDetails,i=n.handleGetUserDetails,o=Object(r.useState)({username:"",userId:"",email:"",aboutUser:"",views:[],followers:[],userImage:"",videos:[]}),c=Object(z.a)(o,2),s=c[0],l=c[1],u={width:"500",height:"280",autoPlay:!1,displayDetails:!0,component:"Profile",classes:e};return Object(r.useEffect)((function(){a&&l(a)}),[a]),Object(r.useEffect)((function(){t&&a&&i({username:null===a||void 0===a?void 0:a.username,id:null===a||void 0===a?void 0:a.userId,email:"undefined"})}),[t]),Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(It.a,{container:!0,sx:{height:{md:"90vh",xs:"100vh",sm:"100vh"},overflow:{md:"hidden",xs:"scroll",sm:"scroll"}},children:[Object(D.jsx)(It.a,{item:!0,className:e.profile,sx:{position:"relative",paddingTop:3},bgcolor:"primary.main",xs:12,sm:12,md:4,children:Object(D.jsxs)(le.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(D.jsx)(jn,{user:s}),Object(D.jsx)(le.a,{className:e.bottomSpace,children:Object(D.jsx)(pe.a,{variant:"h5",children:s.username})}),Object(D.jsxs)(le.a,{sx:{marginBottom:"20px",width:"100%"},display:"flex",justifyContent:"space-evenly",children:[Object(D.jsxs)(pe.a,{variant:"subtitle1",children:["Followers: \xa0 ",null===a||void 0===a?void 0:a.followers.length]})," ",Object(D.jsxs)(pe.a,{variant:"subtitle1",children:["Posts: \xa0",null===a||void 0===a?void 0:a.videos.length]})," ",Object(D.jsxs)(pe.a,{variant:"subtitle1",children:["Views: \xa0",null===a||void 0===a?void 0:a.views.length]})]}),Object(D.jsx)(xn,{}),Object(D.jsx)(vn,{}),Object(D.jsx)(le.a,{children:Object(D.jsxs)(pe.a,{variant:"subtitle1",align:"center",children:["email: ",s.email]})})]})}),Object(D.jsx)(It.a,{item:!0,className:e.videos,xs:12,sm:12,md:8,sx:{position:"relative"},children:Object(D.jsx)(le.a,{sx:{paddingTop:5,padding:{xs:"1rem",sm:"1rem"},overflowY:"scroll",top:0,bottom:0,left:0,right:-17,position:{md:"absolute",xs:"relative",sm:"relative"}},children:Object(D.jsx)(Ot,{videos:null===a||void 0===a?void 0:a.videos,videoPlayerOptions:u})})})]})})}n(484);var On=Object(h.a)({dropBoxContainer:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:"22rem",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingTop:"2rem"},dropBox:{backgroundColor:"#fff",width:"80%",boxShadow:"24",padding:4},imageBox:{height:"16rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",border:"2px dashed #3a8dff"},imageBoxAccept:{height:"16rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",border:"2px dashed green"},imageBoxReject:{height:"16rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",border:"2px dashed red"},uploadImage:{height:"3rem",width:"3rem",margin:"2rem"},typographyBox:{display:"flex",flexDirection:"column",justifyContent:"center"},typography:{textAlign:"center",cursor:"pointer"},typographySpan:{color:"#3a8dff"}}),wn=n.p+"static/media/upload.bbb5d070.png",yn=function(e){var t=e.handleChange,n=Object(r.useCallback)((function(e){t("videoFile",void 0,e[0])}),[t]),a=Object(bn.a)({onDrop:n,multiple:!1,accept:"video/mp4, video/ogg"}),i=a.getRootProps,o=a.getInputProps,c=a.isDragAccept,s=a.isDragReject,l=On();return Object(D.jsxs)(ct.a,{sx:{width:{xs:300,sm:400,md:500},height:{xs:"17rem",sm:"22rem",md:"22rem"}},className:l.dropBoxContainer,children:[Object(D.jsxs)(p.a,Object(ce.a)(Object(ce.a)({className:l.dropBox},i()),{},{children:[Object(D.jsx)("input",Object(ce.a)({},o())),Object(D.jsxs)(It.a,{className:c?l.imageBoxAccept:s?l.imageBoxReject:l.imageBox,sx:{height:{xs:"12rem",sm:"16rem",md:"16rem",display:"flex",flexDirection:"column"}},children:[Object(D.jsx)("img",{loading:"lazy",className:l.uploadImage,src:wn,alt:""}),s?Object(D.jsx)(pe.a,{children:"Sorry, This app only supports Videos or MP4 files"}):Object(D.jsxs)(p.a,{className:l.typographyBox,children:[Object(D.jsxs)(pe.a,{className:l.typography,children:["drop your Video, ",Object(D.jsx)("span",{className:l.typographySpan,children:"browse"})]}),Object(D.jsx)(pe.a,{className:l.typography,children:"Only ogg or MP4 files supported"})]})]})]})),Object(D.jsx)(y.a,{style:{width:"80%"},name:"videoSource",label:"You can paste the video url here",onChange:function(e){var n=e.target,r=n.name,a=n.value;t(r,a,null)},variant:"standard"})]})},kn=n(568);function Sn(e){var t=e.handleSubmit,n=e.setCategory,a=e.setArtist,i=e.setDescription,o=e.videoTitle,c=e.setVideoTitle,s=e.isSubmitting,l=e.uploadProgress,u=e.uploadSuccess,d=e.category,p=Object(r.useState)("primary"),b=Object(z.a)(p,2),j=(b[0],b[1]);Object(r.useEffect)((function(){if(void 0===u)return j("primary");j(u?"primary":"secondary")}),[u]);return Object(D.jsx)(le.a,{sx:{padding:"2rem",width:{xs:"95%",sm:"80%",md:"80%",lg:"80%"},margin:"0 auto"},children:Object(D.jsxs)("form",{onSubmit:t,children:[Object(D.jsx)(le.a,{style:{margin:"20px 0"},children:Object(D.jsx)(y.a,{id:"outlined-basic",onChange:function(e){return c(e.target.value)},label:"Title",fullWidth:!0,name:"title",value:o,variant:"outlined",size:"small",required:!0})}),Object(D.jsxs)(le.a,{style:{margin:"20px 0"},children:[Object(D.jsx)(y.a,{id:"outlined-select-currency",size:"small",fullWidth:!0,variant:"outlined",select:!0,label:"Select video Category",value:d,onChange:function(e){return n(e.target.value)},required:!0,children:[{value:"Music Video",label:"Music Video"},{value:"Music Aduio",label:"Music Aduio"},{value:"Movie",label:"Movie"},{value:"Skit",label:"Skit"}].map((function(e){return Object(D.jsx)(kn.a,{value:e.value,children:e.label},e.value)}))})," "]}),Object(D.jsx)(le.a,{style:{margin:"20px 0"},children:Object(D.jsx)(y.a,{size:"small",id:"outlined-basic",onChange:function(e){return a(e.target.value)},label:"Artist",fullWidth:!0,name:"Artist",variant:"outlined",required:!0})}),Object(D.jsx)(le.a,{style:{margin:"20px 0"},children:Object(D.jsx)(y.a,{size:"small",id:"outlined-basic",onChange:function(e){return i(e.target.value)},label:"Description",fullWidth:!0,name:"description",variant:"outlined",required:!0})}),Object(D.jsx)(le.a,{textAlign:"center",children:Object(D.jsxs)(w.a,{type:"submit",size:"large",variant:"contained",color:"primary",children:[s?u?"Upload Successful":Object(D.jsx)(C.a,{style:{color:"white"}}):void 0===u?"Upload Video":!u&&"Upload Failed",s&&"".concat(l,"%")]})})]})})}function In(e){var t=e.handleSubmit,n=e.setFile,a=e.setUploadSuccess,i=e.setSubmitting,o=(e.setFileName,e.videoSource),c=e.setVideoSource,s=e.setVideoTitle,l=e.isSubmitting,u=e.uploadProgress,d=e.videoTitle,p=e.uploadSuccess,b=e.setVideoDuration,j=e.setArtist,h=e.setDescription,m=e.setCategory,x=e.category,f=Object(r.useState)(void 0),v=Object(z.a)(f,2),g=v[0],O=v[1],w=Object(kt.a)(),y=Object(St.a)(w.breakpoints.up("sm")),k={width:y?"560":"480",height:y?"315":"280",autoPlay:!0,component:"UploadVideoForm",classes:null},S=function(e){if(+e.includes("embed")>0)return c(e),O(e);var t="youtu.be/",n=e.search(t)+t.length,r=e.substr(n,11),a="https://www.youtube.com/embed/".concat(r);return c(a),O(a)};return Object(D.jsx)(le.a,{style:{paddingTop:"3rem"},children:o.length?Object(D.jsxs)(ct.a,{sx:{minHeight:"80vh",width:{sm:"100%",md:"75%",lg:"60%"},margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(D.jsxs)(le.a,{display:"flex",justifyContent:"center",style:{paddingTop:"3rem",position:"relative"},children:[Object(D.jsxs)(de.a,{style:{position:"absolute",zIndex:1,right:"2%",top:"17%",cursor:"pointer"},"aria-label":"update",onClick:function(){s(""),c(""),i(!1),a(void 0)},children:[" ",Object(D.jsx)(ut.a,{sx:{color:"red"}})]}),Object(D.jsx)(ot,{videoSource:g,setVideoDuration:b,videoPlayerOptions:k})]}),Object(D.jsx)(Sn,{handleSubmit:t,setVideoTitle:s,isSubmitting:l,uploadProgress:u,videoTitle:d,uploadSuccess:p,setArtist:j,setDescription:h,setCategory:m,category:x})]}):Object(D.jsx)(yn,{handleChange:function(e,t,r){switch(e){case"videoSource":t&&((null===t||void 0===t?void 0:t.includes("youtu"))?S(t):(c(t),O(t)));break;case"videoFile":if(r){var a=r.type.slice(6);s(r.name.replace(".".concat(a),"")),c("/stream_videos/".concat(Date.now())),O(URL.createObjectURL(r)),n(r)}}}})})}var Cn=function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y.a.post("/video/video-details",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Dn(){var e=A().loggedInUser,t=Object(r.useState)(null),n=Object(z.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)(""),c=Object(z.a)(o,2),s=c[0],l=c[1],u=Object(r.useState)("Choose a file"),d=Object(z.a)(u,2),b=(d[0],d[1]),j=Object(r.useState)(void 0),h=Object(z.a)(j,2),m=h[0],x=h[1],f=Object(r.useState)(0),O=Object(z.a)(f,2),w=O[0],y=O[1],k=Object(r.useState)(""),S=Object(z.a)(k,2),I=S[0],C=S[1],V=Object(r.useState)(""),P=Object(z.a)(V,2),U=P[0],B=P[1],T=Object(r.useState)(!1),E=Object(z.a)(T,2),N=E[0],M=E[1],R=Q().handleGetAllVideos,F=H().updateSnackBarMessage,W=Object(r.useState)(""),L=Object(z.a)(W,2),G=L[0],_=L[1],q=Object(r.useState)(""),J=Object(z.a)(q,2),$=J[0],K=J[1],X=Object(r.useState)(""),Z=Object(z.a)(X,2),ee=Z[0],te=Z[1],ne=function(){var t=Object(g.a)(v.a.mark((function t(n){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),U&&$&&ee){t.next=3;break}return t.abrupt("return");case 3:if(M(!0),!e){t.next=13;break}if(r={username:null===e||void 0===e?void 0:e.username,userId:null===e||void 0===e?void 0:e.id,userImage:null===e||void 0===e?void 0:e.userImage,videoTitle:U,videoId:"",videoSource:I,videoDescription:$,artist:G,videoCategory:ee,videoDuration:s,_id:""},!a){t.next=11;break}return t.next=9,re(r);case 9:t.next=13;break;case 11:return t.next=13,ae(r);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),re=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("video",a),e.prev=2,e.next=5,Y.a.post("/video/upload-video",n,{headers:{"content-Type":"multipart/form-data"},onUploadProgress:function(e){y(Math.round(100*e.loaded/e.total))}});case 5:if(r=e.sent,!(i=r.data)){e.next=13;break}return t.videoSource=i.url,e.next=11,ae(t);case 11:e.next=15;break;case 13:F("video not uploaded"),M(!1);case 15:e.next=22;break;case 17:e.prev=17,e.t0=e.catch(2),console.error(e.t0),F("video not uploaded"),M(!1);case 22:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Cn(t);case 3:n=e.sent,(null===(r=n.data)||void 0===r?void 0:r.success)?(x(!0),R()):(F("video not uploaded"),M(!1),x(!1)),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(0),x(!1),M(!1),console.error(e.t0),F("video not uploaded");case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsx)(p.a,{style:{minHeight:"90vh"},children:Object(D.jsx)(In,{handleSubmit:ne,videoSource:I,setFile:i,setFileName:b,setVideoSource:C,setVideoTitle:B,videoTitle:U,isSubmitting:N,uploadProgress:w,uploadSuccess:m,setVideoDuration:l,setArtist:_,setDescription:K,setCategory:te,category:ee,setSubmitting:M,setUploadSuccess:x})})}var Vn=function(){return Object(D.jsx)(c.a,{theme:l,children:Object(D.jsx)(u.a,{children:Object(D.jsx)(G,{children:Object(D.jsx)(N,{children:Object(D.jsx)(oe,{children:Object(D.jsx)(K,{children:Object(D.jsxs)(Ne,{children:[Object(D.jsx)(nt,{}),Object(D.jsx)(d.d,{children:Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(d.b,{exact:!0,path:"/login",component:X}),Object(D.jsx)(d.b,{exact:!0,path:"/signup",component:re}),Object(D.jsx)(d.b,{exact:!0,path:"/upload-video",component:Dn}),Object(D.jsx)(d.b,{exact:!0,path:"/home",component:yt}),Object(D.jsx)(d.b,{exact:!0,path:"/watch/:title",component:rn}),Object(D.jsx)(d.b,{exact:!0,path:"/profile/:username",component:gn}),Object(D.jsx)(d.b,{path:"/",children:Object(D.jsx)(d.a,{to:"/home"})}),Object(D.jsx)(d.b,{path:"*",children:Object(D.jsx)(d.a,{to:"/login"})})]})})]})})})})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(D.jsx)(Vn,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[485,1,2]]]);
//# sourceMappingURL=main.0efaf1d1.chunk.js.map